<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
		<title>PolyDiag</title>
		<style type="text/css">
			@import "//ajax.googleapis.com/ajax/libs/dojo/1.10.4/dojo/resources/dojo.css";
			@import "//ajax.googleapis.com/ajax/libs/dojo/1.10.4/dijit/themes/claro/claro.css";
			 @import "//ajax.googleapis.com/ajax/libs/dojo/1.10.4/dojox/grid/resources/claroGrid.css";
			@import  "//ajax.googleapis.com/ajax/libs/dojo/1.10.4/dojox/editor/plugins/resources/css/Save.css";
			@import "//ajax.googleapis.com/ajax/libs/dojo/1.10.4/dojox/widget/Dialog/Dialog.css";
			@import "//ajax.googleapis.com/ajax/libs/dojo/1.10.4/dojox/grid/enhanced/resources/claro/EnhancedGrid.css";
        	@import "/resources/demos/style.css";
		 	@import "css/polycss/button.css";
		 	@import "css/polycss/button2.css";
		 	@import "css/polydiag/polydiag.css";
			@import "css/polycss/login.css";
			@import "css/polycss/header-footer.css";
			@import "//code.jquery.com/ui/1.10.4/themes/smoothness/jquery-ui.css";
			@import "//ajax.googleapis.com/ajax/libs/dojo/1.10.4//dijit/themes/claro/claro.css";
     		@import "//ajax.googleapis.com/ajax/libs/dojo/1.10.4//dijit/themes/claro/document.css";
     		 @import "//maxcdn.bootstrapcdn.com/bootswatch/3.3.4/flatly/bootstrap.min.css";
      		/*@import "//ajax.googleapis.com/ajax/libs/dojo/1.10.3//dijit/tests/css/dijitTests.css";*/
      		@import "js/cbtree/themes/claro/claro.css";
      		@import "//netdna.bootstrapcdn.com/font-awesome/3.0.2/css/font-awesome.css";
      		@import "css/polycss/myMblSwitch.css";
      		@import "https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.2/themes/smoothness/jquery-ui.css";
      		@import "js/igv/igv-1.0.9.css";
      		@import "https://cdn.jsdelivr.net/npm/pretty-checkbox@3.0/dist/pretty-checkbox.min.css";

	html, body {
    width: 100%;
    height: 100%;
    margin: 0;
}

.claro .demoLayout .edgePanel {
    background-color: #d0e9fc;
}

.tundra #navMenuCoverage.dijitToolbar {
				background-image:none;
		
		
				background-repeat: repeat-x;
              
                }
                
           .spinner {
  margin: 2px auto 0;
  width: 70px;
  text-align: center;
}

.spinner > div {
  width: 18px;
  height: 18px;
  background-color: #FFFFFF;

  border-radius: 100%;
  display: inline-block;
  -webkit-animation: bouncedelay 1.4s infinite ease-in-out;
  animation: bouncedelay 1.4s infinite ease-in-out;
  /* Prevent first frame from flickering when animation starts */
  -webkit-animation-fill-mode: both;
  animation-fill-mode: both;
}

.spinner .bounce1 {
  -webkit-animation-delay: -0.32s;
  animation-delay: -0.32s;
}

.spinner .bounce2 {
  -webkit-animation-delay: -0.16s;
  animation-delay: -0.16s;
}

@-webkit-keyframes bouncedelay {
  0%, 80%, 100% { -webkit-transform: scale(0.0) }
  40% { -webkit-transform: scale(1.0) }
}

@keyframes bouncedelay {
  0%, 80%, 100% { 
    transform: scale(0.0);
    -webkit-transform: scale(0.0);
  } 40% { 
    transform: scale(1.0);
    -webkit-transform: scale(1.0);
  }
}     
  
			</style>
	 <script type="text/javascript">
 var dojoConfig = {
        parseOnLoad: true,
        packages: [
          { name: "cbtree", location: "/polyweb/js/cbtree" }
        ]
      };

    </script>

		    <script type="text/javascript" src="//code.jquery.com/jquery-2.0.2.min.js"></script>
		         <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
		         	<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.2/jquery-ui.min.js"></script>
		         	
		    <!--     
		    <script type="text/javascript" src="js/igv/igv-1.0.9.js" djConfig="parseOnLoad: true"></script>
		    -->
		     <script src="//cdnjs.cloudflare.com/ajax/libs/dygraph/1.1.1/dygraph-combined.js"></script>
		    <script src="https://cdn.jsdelivr.net/npm/igv@2.11.2/dist/igv.min.js"></script>
			<script src="//ajax.googleapis.com/ajax/libs/dojo/1.13.0/dojo/dojo.js" djConfig="parseOnLoad:true" type="text/javascript"></script>
		  	<script type="text/javascript" src="js/polyjs/include_OLD.js" djConfig="parseOnLoad:true"></script>
		   	<script type="text/javascript" src="js/polyjs/Utility/vp.js" djConfig="parseOnLoad:true"></script>
		   	<script type="text/javascript" src="js/polyjs/Utility/diag_global.js" djConfig="parseOnLoad:true"></script>
		   	<script type="text/javascript" src="js/polyjs/igv_methods.js" djConfig="parseOnLoad:true"></script>
		   	<script type="text/javascript" src="js/polyjs/alamut_methods.js" djConfig="parseOnLoad:true"></script>
			<script type="text/javascript" src="js/polyviewer/methods_polyviewer.js"></script>
		   	<script type="text/javascript" src="js/polyjs/chart_coverage.js"></script>
		   	<script type="text/javascript" src="js/polyjs/electro.js"></script>
		   	<script type="text/javascript" src="js/polyjs/coverage/coverage_global.js"></script>
		   	<script type="text/javascript" src="js/polyjs/coverage/coverage_split.js"></script>
		   	<!-- <script type="text/javascript" src="http://www.dojotoolkit-fr.org/wp-content/uploads/dojo-adapter.js"></script> -->
           
		  	<script type="text/javascript" src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
		  	<script type="text/javascript" src="js/polyjs/igv_view_methods.js" djConfig="parseOnLoad: true"></script>
			<script type="text/javascript" src="js/polyjs/polyweb.js" djConfig="parseOnLoad: true"></script>
			<script src="https://cdn.anychart.com/releases/v8/js/anychart-base.min.js"></script>
			<script src="https://cdn.anychart.com/releases/v8/js/anychart-tag-cloud.min.js"></script>	
	    	<script src='https://cdn.plot.ly/plotly-latest.min.js'></script>     	

<style>
label {
display: inline-block;
width: 5em;
}
</style>
		   	   
		  <script>

		  dojo.require("dijit.layout.LinkPane");
		  dojo.require("dijit.Toolbar");
		  dojo.require("dijit.layout.AccordionContainer");
		  dojo.require("dijit.form.NumberSpinner");
		  dojo.require("dijit.form.Button");
		  dojo.require("dijit.form.FilteringSelect");
			dojo.require("dojo.data.ItemFileWriteStore");
			dojo.require("dijit.TooltipDialog");
			dojo.require("dijit.Dialog");
			dojo.require("dojo.cookie");
			dojo.require("dijit.form.SimpleTextarea");
			dojo.require("dojox.editor.plugins.Save");
		   require(["dojo/parser", "dijit/form/CheckBox","dojo/data/ObjectStore","dojo/store/JsonRest","dijit/form/DropDownButton","dojox/form/CheckedMultiSelect"]);
		  dojo.require("dojox.grid.EnhancedGrid");
		  dojo.require("dojox.grid.enhanced.plugins.DnD");
		dojo.require("dojox.grid.enhanced.plugins.NestedSorting");
		dojo.require("dojox.grid.enhanced.plugins.IndirectSelection");
			dojo.require("dijit.layout.ContentPane");
		require(["dojo/parser", "dijit/layout/TabContainer"]);
		require(["dojox/layout/ScrollPane","dijit/ToolbarSeparator"]);
		dojo.require("dijit.ProgressBar");
		dojo.require("dijit.TitlePane");
		dojo.require("dijit.Menu");
		dojo.require("dojox.grid.enhanced.plugins.Menu");
		dojo.require("dijit.Menu");
		dojo.require("dijit.MenuItem");
		dojo.require("dijit.layout.StackContainer");
		dojo.require("dijit.layout.StackController");	
		dojo.require("dojox.layout.TableContainer");
		
		dojo.require("dojox.mobile");
        dojo.require("dojox.mobile.parser"); 
        dojo.require("dojox.mobile.Switch"); 
		
		require([ "dojo/_base/xhr","dojox/widget/DialogSimple", "dojox/widget/Dialog","dijit/MenuBar", "dijit/MenuBarItem", "dijit/PopupMenuBarItem","dijit/DropDownMenu", "dijit/MenuItem"]);

			var storeP;
			var storeG;
			var storeGroup;
		   	var project_name = param('project'); //"NGS2013_0201";
			document.title = "PolyDiag [" + project_name + "]";
		   var projectName =  project_name;
		   var transcripts =  param('transcripts').split("+");
		   var panel =  param('panel');
		   
		var is_genome_project = -1;
  var first_panel_name = 'none';	

 
  var tree;
      require([
        "dojo/ready",
        "dojo/data/ItemFileWriteStore",
        "cbtree/Tree",                    // Checkbox tree
        "cbtree/models/ForestStoreModel"  // ForestStoreModel
        ], function( ready, ItemFileWriteStore, Tree, ForestStoreModel) {
            // Declare an JSON object


          var store = new ItemFileWriteStore( { url: url_diag_tree+"?project="+project_name+"&panel="+panel });
          var model = new ForestStoreModel( { store: store,
                                               query: {type: "group"},
                                               rootLabel: "Groups",
                                                checkedRoot: true,
                                                checkedState:true
                                             });
           
                   
					  ready(function(){
             tree = new Tree( { model: model, id: "bundleTree" }, "bundle_div" );
            tree.on( "checkBoxClick", change_selected_genes);
            tree.startup();
          });
      
        });
        
        var is_project_update = 'no';
 
		  dojo.ready(function(){
	
  dojo.declare("mySavePlugin", [dojox.editor.plugins.Save],{
    save: function(content){
      this.inherited(arguments);
    }
  });

  dojo.subscribe(dijit._scopeName + ".Editor.getPlugin", null, function(o){
    if(o.plugin){ return; }
    var name = o.args.name.toLowerCase();
	
    if(name ===  "mysave"){
       o.plugin = new mySavePlugin({
         url: ("url" in o.args)?o.args.url:"",
         logResults: ("logResults" in o.args)?o.args.logResults:true
       });
     }
   });
   // Now we can parse the page since we defined our save plugin above.
   dojo.parser.parse();
  });
  
dojo.addOnLoad(function() {	
		      if (dijit.byId('waiting')) {
                    dijit.byId('waiting').show();
                }   
			checkPassword(project_name,okfunction);
			
				
		});
	
var hideorshow =0;	
var button_colors= ["#90ED7D","#217DBB","#E08E0B","#65999F","#6CBF70"]	;
var nbshow=0;
function hideShowWait(){
    
     if (dijit.byId('waiting')) {
         if (hideorshow%2 ==0){
              dijit.byId('waiting').show();
               change_loading_button("pwaiting",button_colors[nbshow%6]);
               nbshow++;
              
         }
         else {
             dijit.byId('waiting').hide();
         }
         hideorshow ++;
     }
}		


 var tsamples;
	
	var cookie_username;
     function checkPassword(project,okf){
               if (cookie_username == null){
            	   cookie_username = dojo.cookie("username");
               }
              var passwd = dojo.cookie("passwd");
            
              urlpasswd = url_listProject+"?type=login&pwd="+passwd+"&login="+cookie_username+"&action=list";
        

              if (project){
                urlpasswd = urlpasswd +"&project="+project;
              }
              var jsonStore = new dojo.data.ItemFileWriteStore({
                        url: urlpasswd
                });
                jsonStore.fetch({
                query: {
                    name: project
                },
                onComplete: okf,
                onError: error,     
            }); 
                
            
 }		
			
			
 var pbv =0;			
			function change_loading_button(name,color1,color2){
			  var o = document.getElementById(name);
			    if (!o){
			        return;
			    }
			    // dojo.style(name, {
                                   // "background":"red",
                                   // color:"red"
                                // });
                      
                      o.style.backgroundColor = color1;            
                    
			    return;
			}
			
			
			
			
			function okfunction(items, request) {
				
				  
				if (items.length == 0) {
				     dijit.byId('waiting').hide();
					dijit.byId('login').show();
					return;
					};
					
				getGencodeTrackForProject(projectName);
           change_loading_button("pwaiting","#336699");
				//document.getElementById("stat_project").textContent= projectName;
				//document.getElementById("stat_description").textContent= "\""+items[0].description+"\"";	
				  
				  var url_header1 = url_header+"?project="+projectName+"&user="+cookie_username;
				  
                header.setHref(url_header1);
				reload_project();
				//preload_coverage();
                var tabs = dijit.byId("tabPrincipal");
                    dojo.connect(tabs,"_transition", function(newPage, oldPage){
                        if (newPage.id =="tab_project"){
                            reload_project();
                        }
                           if (oldPage.id =="tab_genes"){
                            if (dijit.byId("gridGenes")){    
                                var transcripts = dijit.byId("gridGenes").selection.getSelected();
                                
                                if (document.getElementById("span_transcripts") && transcripts.length > 0){
                                    document.getElementById("span_transcripts").innerHTML = transcripts.length;
                                   }
                               }
                           }
                            if  (oldPage.id =="tab_samples"){
                                    var tsamples = dijit.byId("gridPatients").selection.getSelected();
                                    if (document.getElementById("span_patients") && tsamples.length > 0){
                                        document.getElementById("span_patients").innerHTML = tsamples.length;
                                     }
                                }  
                        
                    // console.log("I was showing: ", oldPage.id || "nothing");
                     //console.log("I am now showing: ", newPage.id);
                    });
				 var grid = new dojox.grid.EnhancedGrid({
        				id: 'gridPatients',
        				structure: layoutPatients,
        				rowSelector: '10px',
        				plugins: {indirectSelection: {headerSelector:true,  field: 'active',name: 'Select', width:"40px", styles:"text-align: center;",selected:true}}}, document.createElement('div')
        				);
		
		  			dojo.byId("gridDivPatients").appendChild(grid.domNode);
		  
		   			grid.startup();	
					
					 var grid2 = new dojox.grid.EnhancedGrid({
        				id: 'gridGenes',
        				structure: layoutGenes,
        				//rowSelector: '20px',
        				selection:{mode:'single'}, 
        				plugins: {indirectSelection: { headerSelector:true, field: 'active',name: 'Select', width:"40px", styles:"text-align: center;"}}
        					},
        					 document.createElement('div'));
		
		  			dojo.byId("gridDivGenes").appendChild(grid2.domNode);
		  
		   			grid2.startup();
		   			
		   			
						
				var url1 = construct_url(url_patients);
				var url2 = construct_url(url_validation_genes);
				var url3 = construct_url(url_validation_genes)+"&bundle=1";
				 storeP = new dojo.data.ItemFileWriteStore({
						url: url1
					});
					storeP.fetch({onComplete: fillTabPatients});
					storeP.fetch({onComplete: tabPatients});
					storeP.fetch({onComplete:construct_content_pane_dude});
				storeG = new dojo.data.ItemFileWriteStore({
						url: url2
					});
				 change_loading_button("pwaiting","#9A28CF");
				storeG.fetch({onComplete: fillTabGenes});	
			storeGroup = new dojo.data.ItemFileWriteStore({
						url: url3
					});
		storeGroup.fetch({onComplete: fillTabGroups});			
		
			
				}
	var type = "todo";
	

function reload_project(force){
	  //var username = dojo.cookie("username");
	  	var this_panel = panel;
	  	if (is_project_update == 'yes') {
	  		this_panel = 'sysid';
	  	}
        var url_project = url_summary+"?project="+project_name+"&panel="+this_panel+"&user_name="+cookie_username;
        if (force){
        	url_project = url_project+"&force=1";
        }
        summary.setHref(url_project);
	
		//alert("cuicui");
		//construct_content_pane_dude();
        //preload_coverage();
}
			 
function change_selected_genes(item, nodeWidget, event ) {

var t = new Array();
if (item.children){
	for (var l in item.children){
		var group = item.children[l];
		if (group.children){
			for (var z in group.children){
					var leaf = group.children[z];
					t[leaf.name] = leaf.checked;
			}
		}
		else {
		t[group.name] = group.checked;
		}
	}  
	
}	
else {
	t[item.name] = item.checked;
}
	
var root = tree.model.root;
var root1 = tree.getChildren();
for (var d in tree.model.root.children){
var ds=  tree.model.root.children[d];
	for (var l in ds.children){
			var leaf = ds.children[l];
			
			if (t[leaf.name]){
				if (t[leaf.name]=="false"){
					tree.model.setChecked(leaf,false);
				}
				else {
					tree.model.setChecked(leaf,true);
				}
			}
			
		}
	}	

	var grid =  dijit.byId("gridGenes");

	for (i = 0; i < grid.rowCount; i++){
		var it = grid.getItem(i);
	    if (t[it.label]){
		var value = t[it.label];
		if (value=="false"){
		grid.rowSelectCell.toggleRow(i, false) ;
		}
		else {
			grid.rowSelectCell.toggleRow(i, true) ;
		}
		}
	}

		   
	}	





var AllTranscripts = new Array();


	
	 var tab_coverage;
	 
	 function clearOldList(){
	 	dijit.byId("setTestBar").update({progress: 0});
	 }
	 function gotItem(item, request){
	 	//console.dir(item);
	 	
	 }
	 	
	 	function zoomCnv(tr,r,panel){
        
        
         var start_url = url_cnv;
            
            var url = construct_url(start_url,tr);
            dijit.byId("popup_coverage").show();
            dijit.byId("div_popup_coverage").setHref(url+"&large=1&panel="+panel);
        
      }
	 	function zoomHgmd(p,hid,vid){
	        
	        
	     
	            dijit.byId("popup_hgmd").show();
	            dijit.byId("div_popup_hgmd").setHref(url_hgmd_view+"?hid="+hid+"&vid="+vid+"&project="+p);
	        
	      }	
	 	
	 	function comment_cldb(id){
	        
	        
	      //   var start_url = url_cnv;
	            
	    //        var url = construct_url(start_url,tr);
	            dijit.byId("popup_cldb").show();
	      // dijit.byId("div_popup_coverage").setHref(url+"&large=1");
	        
	      } 	
	 	
	 	
	  function zoomCoverage(tr){
	  	
	  	
	  	 var start_url = url_coverage;
		 	
		 	var url = construct_url(start_url,tr);
		 	dijit.byId("popup_coverage").show();
		 	dijit.byId("div_popup_coverage").setHref(url);
	  	
	  }
	  function zoomPrimer(cp,ml){
        
         var start_url = url_primer_coverage;
            
            var url = construct_url(start_url);
            url+="&capture="+cp+"&multiplex="+ml;
            dijit.byId("popup_coverage").show();
            dijit.byId("div_popup_coverage").setHref(url);
        
      }
		var tab_coverage = {};//new Array();
		var first =0;
		var panel_coverage_stack_changed = 0;
		function preload_coverage(storeP,reload_flag) { 
			
			
  
		  
		     if (first >0) {
		         reload(5);
		         return;
		     }
		     first ++;
		        tsamples = storeP._arrayOfAllItems;//dijit.byId("gridPatients").selection.getSelected();
				
		    var url_cnv =    construct_url(url_cnv_overview)+"&test_cache=1";
       // document.getElementById("waiting_text").textContent = "Loading Data... [0/25]";
      
	 require(["dojo/promise/all", "dojo/Deferred", "dojo/request", "dojo/_base/array", "dojo/dom-construct", "dojo/dom", "dojo/json", "dojo/domReady!"],
function(all, Deferred, request, arrayUtil, domConstruct, dom, JSON) {

		//function preload_coverage(value){
		 
            var p="";
            var samples = new Array();
            var requests = new Array();
             var url = construct_url(url_cached_coverage);
             var progress_id =0;
        
             var max =0;
              
                   var i,j,temparray,chunk = 4;
                   var labels = new Array;
                   var z =0;
                    for (i=0,j=tsamples.length; i<j; i+=chunk) {
                        temparray = tsamples.slice(i,i+chunk);
                        var temp = new Array();
                        for (var x=0;x<temparray.length;x++){
                            temp[x] = temparray[x].label;
                        }
                        
                        labels[z++] = temp.join(",");
                    }
                     
                          max =    labels.length +1;
                          
                          
                      for(i=0;i<Math.round(labels.length/2);i++){
                         requests[i] = request.get( url+"&patient_cached="+ labels[i], {
                                                        handleAs: "json"
                                                        }).then(function(response){
                                                            
                                                            progress_id ++;
                                                            myProgressBar.set( { value: progress_id } );
                                                          
                                                            return 1;
                                                            }) ;
                           // do whatever
                        }           
                    
                      
                    myProgressBar.set( { value: 0,maximum:max } );
                   dijit.byId('waiting_progress').show();   
                   

    
		var request2 = new Array();
		 all(requests).then(function(results){
		     
		      for(i=Math.round(labels.length/2);i<labels.length;i++){
                         request2[i+labels.length] = request.get( url+"&no_cache=1&patient_cached="+ labels[i], {
                                                        handleAs: "json"
                                                        }).then(function(response){
                                                            progress_id ++;
                                                            myProgressBar.set( { value: progress_id } );
                                                          
                                                            return 1;
                                                            }) ;
                           // do whatever
                        }           
                 request2[i+labels.length] = request.get(url_cnv, {
                                                        handleAs: "html"
                                                        }).then(function(response){
                                                            progress_id ++;
                                                            myProgressBar.set( { value: progress_id } );
                                                          
                                                            return 1;
                                                            }) ;
                                                             
                all(request2).then(function(results){
                    if (reload_flag ==1) reload(5) ;
                     dijit.byId('waiting_progress').hide();
                });
                    
                 //  
                   //
                    
                
            });      

		});
		
		}
		
	   function loading (){ 
             
       // document.getElementById("waiting_text").textContent = "Loading Data... [0/25]";
      
        require(["dojo/promise/all", "dojo/Deferred", "dojo/request", "dojo/_base/array", "dojo/dom-construct", "dojo/dom", "dojo/json", "dojo/domReady!"],
            function(all, Deferred, request, arrayUtil, domConstruct, dom, JSON) {	
		
            }
        );
        
        
}

function cnv_display() {
	
	
}
function  create_content_pane_coverage (){
		var step = 100;
		var first =-1;
		var previous = -1;
		var ii =1;
		tab_coverage.coverage = new dojox.layout.ContentPane({
			title: "Coverage",
         		content: " ",
         		 closable: true,
         		 id:"cov50_0",
         		 onClose: function() {
         		// var t = this.get('title');
         		// delete tab_patients[t];
                 return true;
              },
               onShow:  function() {
               		//tab_coverage.coverage.setHref(url+"&step=");
               }
    		});
table_coverage.addChild(tab_coverage.coverage);
/*
tab_coverage.cnv = new dojox.layout.ContentPane({
			title: "CNV",
         		content: " ",
         		 closable: true,
         		 id:"CNV10_",
         		 onClose: function() {
         		// var t = this.get('title');
         		// delete tab_patients[t];
                 return true;
              },
               onShow:  function() {
					start_url =url_cnv_overview ;
					var url = construct_url(start_url);
					this.setHref(url);
               		//tab_coverage.coverage.setHref(url+"&step=");
               }
    		});
table_coverage.addChild(tab_coverage.cnv);
*/

}

function reload(value) {
	      	var this_order;
		if (tab_coverage.coverage == null){
			create_content_pane_coverage();
			}




			if (dijit.byId("ENST_order").get("value") == "on") { this_order = "name";}
    		else {this_order = "position";}
	      	
		 	var start_url = url_coverage;
		 	if (value == 5 ) {
		 		start_url = url_coverage_overview;
		 		
		 		
		 		
		 	}
		 	if (value == 3) {
                start_url = url_primer_coverage_overview;
                
            }
            if (value == 4)  {
            	start_url =url_cnv_overview ;
            
            }
		 	var url = construct_url(start_url);
		 	
		 	var nbTranscripts = dijit.byId("gridGenes").selection.getSelected().length;
		 	
		 	if (value ==1){
		 		dijit.byId("ENST_order").set("value", "on");
				url+= "&only_red=1";
			}
			else if (value ==2){
		 		dijit.byId("ENST_order").set("value", "on");
				url+= "&only_orange=1";
			}
			else if (value ==3){
		 		dijit.byId("ENST_order").set("value", "on");
				url+= "&multiplex=1";
			}
			else if (value ==4){
				url+= "&cnv=1";
				url+='&order='+this_order;
			}
			else if (value ==5) {
				url+='&order='+this_order;
				url+="&only_low="+dijit.byId("only_low").get('value');
	
			}
		tab_coverage.coverage.setHref(url);

 
		   }
		   
var myAlertDialog;
function warning(text){
	if (!myAlertDialog) {
			 myAlertDialog = new dijit.Dialog({
        			title: "Warning",
        			content: text,
        			style: "width: 200px;height:150px;font-size: 13px;"
    				});
    			}
  
    	myAlertDialog.show();
    				return;
	}		   
function get_alacarte(){
	var text = "";
	var tt = ["project_summary","graphic_coverage","all_coverage","cnv_coverage","table_variations","sanger_variations","validated_variations","todo_variations","all_variations"];
	for (var i=0;i<tt.length;i++){
		if (dijit.byId(tt[i]).get("checked")){
			text+="&"+tt[i]+"=1";
		}
	
	}

	return text;
}   

var vectors_hex;
var polyquery_filters;
var panel_editor_stack_changed = 0;
var tab_patients = new Array();
var tab_editor_polyviewer = new Array();

var tab_editor_polycyto = new Array();
var tab_editor_polydude = new Array();

var tab_editor = new Array();

    
		

	function return_selected_patient(tab){
		for (var p in tab ){
			if (tab[p].get('selected')) { return p; }
		}
		return "";
	}	
	function print_patient(type,p){
		var p = return_selected_patient(tab_patients);
		
		open_window_report(p,type);
	}
	function send_print(p,mode){
           var p = span_name.innerHTML;
           var name = document.getElementById('input_name').value;   
	       printer(p,1,name);
	    }	
	function printer2(p,mode){
        span_name.innerHTML=p;
        dijit.byId('popup_patient_name').show();
        return;
        }    
	
	function printer(p,mode,name){

	    var url = url_report_patient+"?project="+project_name+"&panel="+panel+"&edit_mode=0"+"&report_mode=1"+"&this="+dijit.byId("select_this").get("value")+"&impact="+dijit.byId("select_impact").get("value")+"&frequence="+dijit.byId("select_frequence").get("value");
         url+=get_alacarte();
		 console.log(get_alacarte());
	     url += return_options();
 		console.log(return_options());
        
 
        var transcripts = dijit.byId("gridGenes").selection.getSelected();
         t="";
        var tz="";
        var total_show=0;
        if (transcripts.length == nb_genes){
            t="all";
            tz = "all";
        
        }
        else {
        for (i=0;i<transcripts.length;i++){
        t += transcripts[i].transcript+",";
        
        }
        }
        url += "&transcripts="+t;

    //    var username = dojo.cookie("username");

        url += "&user_name="+cookie_username;
      
        if (p == "all"){
       	 var tsamples = storeP._arrayOfAllItems;
       	 var x =0;
  	   	for (i=0,j=tsamples.length; i<j; i++) {
  		  
  		   var t = "check_"+tsamples[i].id[0];
  		 
  		   if( dojo.byId(t).checked == true){
  				window.open(url+"&patients="+tsamples[i].id[0]);
  				x ++;
  		   }
  		   
  		   
  	   }
  	   	if (x ==0){
  	   		alert("Select at least one patient ");
  	   	}
 		
          return;
 	   }
        if (mode == 1) {url += "&print=1&name="+name;}
	 
	   url+="&patients="+p;
	   child = window.open(url); //Open the child in a tiny window.
            window.focus();
	   // open_window_report(p,1);
	} 	
		
		function open_window_report(patient,type){
		    	
				var url = tab_patients[patient].setUrl+"&print=1";
				
		
		}
		
		function open_report_quality() {
			
			 var url = url_report_quality+"?project="+project_name;
			  var win = window.open(url, '_blank');
			  win.focus();
			}
		   function report(){
			var url = construct_url(url_todo);;		   
			todo_div.setHref(url);
			select_exons = new Array();
			sanger_variations_valid = new Array();
			sanger_exons_valid = new Array();
			type = "report";
		   }
		   
		   
		   var sanger_variations_valid = new Array();
		   var sanger_exons_valid = new Array();
		    function todo_xls(){
         
            limit =  limit_spinner.value;
            padding = padding_spinner.value;
            var url;
         
             url = construct_url(url_todo);
           
            url += "&xls=1";
            
            window.location=url;
            
            
           }

	           function todo_print(){
         
            limit =  limit_spinner.value;
            padding = padding_spinner.value;
            var url;
         
             url = construct_url(url_todo);
           
            url += "&print=1";
            
             child = window.open(url); //Open the child in a tiny window.
             window.focus(); //Hide the child as soon as it is opened.
            
            
           }	
           
           function export_gene_tab_xls(){
           	url = construct_url(url_validation_genes);
           	url += "&type=gene&xls=1";
			window.location=url;
           }   
		   
		   function xls(){
		 
			limit =  limit_spinner.value;
			padding = padding_spinner.value;
			var url;
			if (type == "report"){
			 url = construct_url(url_todo);
			}
			else {
				alert("error");
			}
		
			url += "&xls=1";
			
			window.location=url;
			
			
		   }
		   
		    function put_validation_exons(item,td,vv){
		        
			 if (item.checked) {
			 	var myColor = dojo.colorFromString("yellow");
				dojo.style(td.id, "backgroundColor", myColor);
			 	sanger_exons_valid[vv] = 1;
			 }
			 else {
			 	var myColor = dojo.colorFromString("red");
				dojo.style(td.id, "backgroundColor", myColor);
			 	
			 	sanger_exons_valid[vv] = 0;
			 }	  	
		  }
        function put_validation_exons2(item,tdid,vv){
    
			sanger_exons_valid[vv] = item.value;
			 var td = document.getElementById(tdid);
			td.classList.remove("info");
            td.classList.remove("success");
            td.classList.remove("danger");          
             td.classList.add("info");
			
		  }
		   
		   function put_variations_status(item,tdid){
		   	
			

			if (item.value == "none") {
			    delete sanger_variations_valid[item.name];
			    return;
			}
			
			sanger_variations_valid[item.name] = item.value;
			 var td = document.getElementById(tdid);
            td.classList.remove("info");
            td.classList.remove("success");
            td.classList.remove("danger");          
             td.classList.add("info");
			
		   }
		   
		   var select_exons = new Array();
		   function test(node){
		   	 if (node.checked) {
			 	select_exons[node.value] = 1;
			 	save_button.setDisabled(false);
			 	
			 }
			 else {
			 	select_exons[node.value] = 0;
			 }
			 var n=0;
			for (var z in select_exons) {
					if (select_exons[z] > 0) {
						n++;
					}
				}
				
			 save_button.set("label","save ("+n+" exons)");
		   }
		   
		   
		   
           function save_validations(){
               var text = "";
               for (var z in sanger_variations_valid) {
               
                   text = text + z + ":" + sanger_variations_valid[z] + ",";
                   
                   
               }
               
               var text2 = "";
               
               for (var z in sanger_exons_valid) {
                   if (sanger_exons_valid[z] != 0) {
                   		var val = sanger_exons_valid[z];
                       text2 = text2 + z+"@" +val+ ",";
                   }
                   
               }
               var url = url_update_validations + "?project=" + project_name + "&variations=" + text + "&exons=" + text2;
			//   var username = dojo.cookie("username");
				url += "&user_name="+cookie_username;
               sendData(url);
           }
		  

		 
		 
		  function show_save(){
		  	if (type == "report"){
				save_validations();
				return;
			}
			if (type == "todo") {
				var text = "";
				var textq = "";
				
				for (var z in select_exons) {
					if (select_exons[z] > 0) {
						text = text + z + "!";
						select_exons[z] =0;
					}
					
				}
				save_button.setDisabled(false);
				save_button.set("label","save");
				// var username = dojo.cookie("username");
				var url = url_save_exons + "?project=" + project_name + "&exons=" + text+"&user_name="+cookie_username;
				sendData(url);
				return;
			}
			alert("error type :"+type);
		   }
	

function save_report(patient,form_id){
	var url = url_report_patient;
	url = url+"?project="+project_name;
	limit =  limit_spinner.value;
	padding = padding_spinner.value;
	url += "&span="+padding;
	url += "&limit="+limit;
		
		/* sample */
	
		url += "&patients="+patient;
		
	
		

		// var username = dojo.cookie("username");
		 
		 url += "&transcripts=all";
		var url1 = url;
		url1 += "&user_name="+cookie_username+"&save=1";
		

	dojo.xhrGet({
      url: url1,
      handleAs: "text",
      load: function(data){
        	return;
      },
      error: function(error){
	  	 alert("error");
        // We'll 404 in the demo, but that's okay.  We don't have a 'postIt' service on the
        // docs server.
      //  dojo.byId("response2").innerHTML = "Message posted.";
      }
    });
	
}	 
		 
function sendData(url){
	
	
	dojo.xhrGet({
        url: url,
        method: "get",
        handleAs: "text",
        handle: function(data, ioArgs){
            var foo = dojo.fromJson(data);
            if (foo.status == "OK") {		
				alert("OK");
				if (type == "todo") {
					reload();
				}
				else {
					report();
				}
				return 1;
            }
            else {
			
				alert("error");
				 return -1;
            }          
        }     
    }); 
}

function change_label(tp,text){
	 dojo.byId('stats_cnv').innerHTML = text;
	//	 dijit.byId(tp).attr('label',text+"");
}



function validation_2 (pname,vid,select,tdid){
   /*  if (select.value == 0){
         return;
     }
     */
     
     
 
    var url = url_valid+"?variation_id="+vid+"&samples="+pname+"&project="+project_name+"&user="+cookie_username+"&value="+select.value+"&poly_id="+vid;
    var td = document.getElementById("td_"+tdid);
        td.classList.remove("info");
    td.classList.remove("success");
     td.classList.remove("warning");
    td.classList.remove("danger");
     var div = document.getElementById("div_"+tdid);
     
    div.innerHTML = "<i class='fa fa-spinner fa-spin'></i>"; 
     
    dojo.xhrGet({ 
        // The following URL must match that used to test the server.
        url: url,
        handleAs: "json",     
        timeout: 80000, // Time in milliseconds
        // The LOAD function will be called on a successful response.
        
        load: function(responseObject, ioArgs,evt){
            if (responseObject["status"] == "OK") {
                div.innerHTML = "<i class='fa fa-check-square'> Saved</i>";
                td.classList.add("success");
                 return;
            }       
            
        
            
        },
        
        // The ERROR function will be called in an error case.
        error: function(response, ioArgs){ // &acirc;&#382;&fnof;
            alert("Error !!!!");
               div.innerHTML = '<i class="fa fa-exclamation-triangle"> Error</i>';
             td.classList.add("info");
            return;
        }
        
        
    });
     
   
}

function validation (pname,vid,button,value,text_value,button_id,menu_id){
	//var username = dojo.cookie("username");
	/*dojo.byId(tt).innerHTML="";
	var toolbar = new dijit.Toolbar({}, tt);
	*/
    var url = url_valid+"?variation_id="+vid+"&samples="+pname+"&project="+project_name+"&user="+cookie_username+"&value="+value+"&poly_id="+vid;
 		var button = new dijit.form.Button({
            // note: should always specify a label, for accessibility reasons.
            // Just set showLabel=false if you don't want it to be displayed normally
            label: text_value,
            iconClass: "dijitEditorIcon dijitEditorIconSave",
            disabled:true,
        });
        
    //  toolbar.addChild(button);
	

	
	dojo.xhrGet({ 
        // The following URL must match that used to test the server.
        url: url,
        handleAs: "json",     
        timeout: 80000, // Time in milliseconds
        // The LOAD function will be called on a successful response.
        
        load: function(responseObject, ioArgs,evt){
        	if (responseObject["status"] == "OK") {
        		
        		dojo.replaceClass(button, "button todo");;

        		//console.dir(button);
				 return;
			}		
			
        
            
        },
         
        // The ERROR function will be called in an error case.
        error: function(response, ioArgs){ // &acirc;&#382;&fnof;
        	alert(responseObject["status"]);        
            return;
        }
        
        
    });
}

function viewElectro  (pname,vid){
	dijit.byId('align').show();
		//align.show();
		//dojo.byId("align").show();//=true;
	
		dojo.byId("talign").innerHTML='  ';

		
			var url_arg = "?project=" + project_name  +"&poly_id="+vid+"&variation_id=" + vid  + "&patient_name=" + pname+"&len=40";
			
		
			dojo.xhrGet({ // 
				// The following URL must match that used to test the server.
				url: url_chart + url_arg,
				handleAs: "json",
				timeout: 100000, // Time in milliseconds
				// The LOAD function will be called on a successful response.
				load: function(responseObject, ioArgs){
					// Now you can just use the object
					//pour les projets de squencage classique on trace des chromatogrammes
			
					traceCover(responseObject, dojo.byId("talign"));
				},
				
				// The ERROR function will be called in an error case.
				error: function(response, ioArgs){ // 
				
					console.error(response);
					//en cas d'erreur
					td1.innerHTML = 'Loading Error ...';
					
					return response; // 
				}
			});
			

	
	
	
}


function LoadIGVPatient_diag () {
		var patient = return_selected_patient(tab_patients);
    
    //var store =   new dojo.data.ItemFileWriteStore({url:url_igvbis});

    var url_igvbis =url_igv+"?project="+projectName;
    

        url_igvbis += "&patients=" + patient;
   
    
    var store = new dojo.data.ItemFileWriteStore({url:url_igvbis});

    store.fetch({
                onComplete: jumpToIgvXml
            
            });
}


function popup_patient(){
		dijit.byId("popup_patient").show();
}

function collapse_all(names,labels){
    var ps = names.split(";"); 
    var ls = labels.split(";"); 
    console.dir(ps);
    for (i=0;i<ps.length;i++){
        
        collapse(ps[i],ls[i]);
    }
    var d = document.getElementById(name);
    
}
function collapse(name,label){
    var d = document.getElementById(name);
    var l;
     l = document.getElementById(label);
    if (d.classList.contains("in")) {
        d.classList.remove("in");
     if (l){
           l.classList.remove("glyphicon-triangle-bottom");
           l.classList.add("glyphicon-triangle-right");
        }
    }
    else {
        d.classList.add("in");
            l.classList.remove("glyphicon-triangle-right");
             l.classList.add("glyphicon-triangle-bottom");
        
    }
}

 function select_enable(id){
 
     var select = document.getElementById(id);
    console.dir(select);
   //  dojo.removeAttr(id, 'disabled');
     //    console.dir(select);
  
 }
 
function select_all(check){
	 var tsamples = storeP._arrayOfAllItems;

   	 var x =0;
	   	for (i=0,j=tsamples.length; i<j; i++) {
		  
		   var t = "check_"+tsamples[i].id[0];
		   dojo.byId(t).checked = check.checked;
		  
		   
	   }	
}
function selection(event,check){
	 
	if (event.shiftKey && check.checked == true){
		var tsamples = storeP._arrayOfAllItems;
		var start=-1;
		var end = -1;
		for (i=0,j=tsamples.length; i<j; i++) {
			  
			   var t = "check_"+tsamples[i].id[0];
			   if (dojo.byId(t).checked == true && start == -1) {
				   start =i;
			   }
			  if (dojo.byId(t) == check){
				  end =i;
			  }
			  
			   
		   }
		if (start < end){
			for (i=start+1; i<end; i++) {
				  var t = "check_"+tsamples[i].id[0];
				  dojo.byId(t).checked = true ;
			}
			
	
		}

		
	}
} 
var view_polydiag =0;
function show_low(){
	 var url = url_low+"?project="+projectName+"&utr=0&padding=5&covlimit=30";
	 tab_coverage.coverage.setHref(url);
}
		  </script>
	</head>
	
    <body class="claro" style ="font-size : 11px;">

     <div dojoType="dijit.Dialog" jsId="waiting" id="waiting" style="width:210px;height:120px;background-color:#2C3E50" >
           <div class="panel panel-primary" id="pwaiting1" style="height:100%">
                <div class="panel-heading"  id="pwaiting">
                     <h2 class="panel-title" style="font-size: 10px">Loading  
                         <div class="spinner pull-right">
                            <div class="bounce1"></div>
                            <div class="bounce2"></div>
                             <div class="bounce3"></div>
                            </div>
                         </h2>
                </div>
</div>
</div>

<div  data-dojo-type="dijit/layout/BorderContainer" data-dojo-props="design:'sidebar', gutters:true, liveSplitters:true" style="width: 100%;height:100%">
<div  data-dojo-type="dijit.layout.ContentPane"  data-dojo-props="region:'top'" style="width: 100% ; height: 80px;padding:0px;" >



  <div  data-dojo-type="dijit.Toolbar"  id="navMenu" style ="font-size: 10px;">

      <div jsId="header" data-dojo-type="dijit.layout.ContentPane"  style="background-color:#F4F4F4;width: 100% ;" >
</div>
<div style="width: 50%;margin: 0 auto;">
    <!-- <span id="stat_project">---</span><span data-dojo-type="dijit/ToolbarSeparator"> </span>
    <span   id="stat_description"  >---------------</span><span data-dojo-type="dijit/ToolbarSeparator"> </span> -->
   Coverage limit :  
  <select jsId="limit_spinner" id="limit_spinner" data-dojo-type="dijit/form/Select">
  
    
      <option value="0">0</option>
     <option value="5" >5</option>
    <option value="10" >10</option>
    <option value="15">15</option>
    <option value="20">20</option>
    <option value="30" selected="selected">30</option>
       <option value="50" >50</option>
        <option value="100" >100</option>
        <option value="200" >200</option>
         <option value="300" >300</option>
           <option value="500" >500</option>
              <option value="1000" >1000</option>
</select>

       padding limit : 
 <select jsId="padding_spinner" id="padding_spinner" data-dojo-type="dijit/form/Select" onChange="first=0;">
  
    
      <option value="0">0</option>
      <option value="5" >5</option>
    <option value="10">10</option>
    <option value="15">15</option>
    <option value="20" selected="selected">20</option>
    <option value="30">30</option>
</select>
    
           &nbsp;&nbsp;<input jsId="utr" id="utr" name="utr" data-dojo-type="dijit/form/CheckBox" value="1" /> <label for="utr">UTR</label>
            <input jsId="intronic" id="intronic" name="intronic" data-dojo-type="dijit/form/CheckBox" value="1" /> <label for="intronic">Intronic</label>
             <input jsId="all_var" id="all_var" name="all_var" data-dojo-type="dijit/form/CheckBox" value="1" /> <label for="all_var">All&nbsp;Variations</label>
   
</div>            
<span class="insetheader4"><img src="/icons/Polyicons/bipd4.png" width="50%" height="50%"></span>
<span class="insetheader5">Bioinformatics Paris Descartes,Imagine Institute</span>
</div>
</div>
<!--   <div data-dojo-type="dijit/layout/AccordionContainer" data-dojo-props="region: 'center'" style="width: 100%; height: 100%" tabPosition="left-h">
 <div jsId="stack_general" data-dojo-type="dijit/layout/StackContainer" data-dojo-props="region: 'center'" style="width: 100%; height: 100%" tabPosition="left-h">

 -->
 <div id="tabPrincipal" jsId="tabPrincipal" data-dojo-type="dijit/layout/TabContainer"  data-dojo-props="region: 'center'" tabPosition="top" tabStrip="true" style="font-size:11px">
 	 <div  jsId="summary2" data-dojo-type="dijit/layout/ContentPane" id="tab_project" title="Project"  data-dojo-props="selected:true" href="include_html/diag/project_container.html">
	</div>
	
	
   	 <div   id="tab_genes" data-dojo-type="dijit/layout/ContentPane" title="Genes" data-dojo-props="selected:true" >
   	 
   	        <div id="content" data-dojo-type="dijit/layout/BorderContainer" style="font-size : 10px" data-dojo-props="liveSplitters:false, design:'sidebar'">
   	        	   <div  data-dojo-type="dijit/layout/ContentPane" data-dojo-props="region:'top', splitter:false, maxSize:5" > 
   	        			<div class="panel panel-primary">
   	 						<div class="panel-heading clearfix" style="min-height:30px;max-height:30px;">
								<h3 class="panel-title pull-left" style="padding-top: 1.5px;font-size: 15px;">Export genes</h3>
								<div class="btn-group btn-sm clearfix pull-right" style="position:relative;top:-14px;float:right">
								<div onclick="export_gene_tab_xls();" aria-label="Right Align" class=" btn btn-danger btn-sm ">
		 						<i class="fa fa-file-excel-o pull-right"></i>		
		 						</div>
							</div>	
						</div>
					</div>
			</div>
        	<div  data-dojo-type="dijit/layout/ContentPane" data-dojo-props="region:'left', splitter:true, minSize:20"> 
            	<div id="bundle_div"></div>   
     		</div>
        
       		<div data-dojo-type="dijit/layout/ContentPane" data-dojo-props="region:'center'" style="width:100%;height:100%" >
            	<div id="gridDivGenes" style="font-size: 9px;font-family:Verdana;width:100%;height:100%"> </div>
        	</div>
	</div>
    
       </div>
    
 <!--   
<div  id="tab_samples" data-dojo-type="dijit/layout/ContentPane" title="Patients" style="font-size : 10px"data-dojo-props="selected:true" onHide="var_load_polyviewer=1;refresh_tab_polyviewer();refresh_tab_polydiag();">
	  <div id="gridDivPatients" style="font-size: 11px;font-family:Verdana;width:100%;height:100%">
 		</div> 
	
</div>
-->
	

   	<div id="coverage_stack" data-dojo-type="dijit/layout/ContentPane" title="Coverage"  href="include_html/diag/coverage_container.html"  onload="preload_coverage()"> </div>
 
         <div  id="editor_stack2" jsid="editor_stack2" data-dojo-type="dijit/layout/ContentPane" title="PolyViewer" href="include_html/diag/editor_container_polyviewer.html"   onload = "load_tab_polyviewer();update_buttons_polyquery();load_polyviewer();"  style="font-size:9px;width:100%;overflow-x:auto;">
   </div>
   
   
    <div id="editor_stack" data-dojo-type="dijit/layout/ContentPane" title="Variations Editor" href="include_html/diag/editor_container.html"  onload = "view_polydiag=1;load_tab_polydiag();" >
              </div>
 			


	 <div   data-dojo-type="dijit/layout/ContentPane" title="ToDo" id="todo_stack" jsId="todo_stack" name ="todo_stack" onShow="report();">
			<div data-dojo-type="dijit/layout/BorderContainer" data-dojo-props="design:'sidebar', gutters:true, liveSplitters:true" >
	
				
			<div jsId="todo_div" id="todo_div" data-dojo-type="dijit/layout/ContentPane" data-dojo-props="splitter:false, region:'center'" >
				</div>

   	
	</div>


 	</div>			
	
	         
		
   </div>

   
   

			
	
		
   </div>

<div class="edgePanel" data-dojo-type="dijit.layout.ContentPane" data-dojo-props="region: 'bottom'">
	  <div dojoType="dijit.Toolbar" style="font-size : 09px;width: 100%;">
			<label id="label_genes"style="font-size : 09px;width: 100%;"> - </label>
    </div>
	 <div dojoType="dijit.Toolbar">      
            Patient : <label id="label_patients">
            </label>
      </div>

</div> 



     <div dojoType="dijit.Dialog" jsId="waiting_progress" id="waiting_progress" style="height:80;" >
        <div data-dojo-type="dijit/ProgressBar" style="width:300px" data-dojo-id="myProgressBar" id="myProgressBar" data-dojo-props="maximum:25"></div>
        <br>
        <span>Loading coverage ...</span>
    </div>
    
    <div dojoType="dijit.Dialog" jsId="dialog_hidden_hidden" id="dialog_hidden_hidden" style="height:80;" >
    	<div id="container_editor_polycyto" jsId="container_editor_polycyto" data-dojo-type="dijit/layout/TabContainer" data-dojo-props="splitter:false, region:'center'" style="width:100%;height:80%;"></div>
    </div>



   <div id="align" dojoType="dojox.widget.Dialog" sizeToViewport="true"  viewportPadding="130" title="A Dialog Thinger" > 
   	
   <div id="talign"  >
   </div>
</div>

<div id="popup_genes" dojoType="dojox.widget.Dialog"   dimensions="[1000,450]"  onHide="change_label_genes();" > 
	<!-- <div id="content" data-dojo-type="dijit/layout/BorderContainer" style="font-size : 12px;width:1000px;height:445px" data-dojo-props="liveSplitters:false, design:'sidebar'">
        <div  data-dojo-type="dijit/layout/ContentPane" data-dojo-props="region:'leading', splitter:true, minSize:20" style="width:200px;height:445px">	
 		<div id="bundle_div" > </div>	
		</div>
 		<div data-dojo-type="dijit/layout/ContentPane" data-dojo-props="region:'center'" style="width:650px;height:445px">
 			<div id="gridDivGenes" style="width:650px;height:445px"> </div>
		</div>
</div> -->
</div>

<div id="popup_coverage" dojoType="dojox.widget.Dialog"   sizeToViewport="true" viewportPadding="20" > 
        <div  id="div_popup_coverage" jsId="div_popup_coverage" data-dojo-type="dijit/layout/ContentPane">	
        	
 		</div>	
		
</div>
<div id="popup_hgmd" dojoType="dojox.widget.Dialog"   dimensions="[600,300]"   > 
        <div  id="div_popup_hgmd" jsId="div_popup_hgmd" data-dojo-type="dijit/layout/ContentPane">	
        	
 		</div>	
		
</div>
<div id="popup_patient" dojoType="dojox.widget.Dialog"   dimensions="[520,490]" onHide="construct_url('');"> 
 <!-- <div id="gridDivPatients" style="font-size : 9px;width:500px;height:490px">
 </div> -->
</div>

<div id="graph_exon" dojoType="dojox.widget.Dialog"   dimensions="[1020,550]" > 
    <table style="width: 100%; height: 100%;">
        <tr><td> <div id="title_graph" style="font-size: 11pt;height: 40px;"></div></td></tr>
        <tr><td style="width: 810px; height: 450px;" > <div id="chart_exon" style="width: 1010px; height: 450px;"></div></td></tr>
           <tr><td> <div id="status" style="font-size: 11pt;width: 1010px; height: 20px;"></div></td></tr>
    </table> 
</div>

<div id="popup_cldb" dojoType="dojox.widget.Dialog"   sizeToViewport="true" viewportPadding="20" > 
        <div  id="div_popup_cldb" jsId="div_popup_cldb" data-dojo-type="dijit/layout/ContentPane">	
        	
 		</div>	
		
</div>
    <div data-dojo-type="dijit.Menu" id="cellMenu"  style="display: none;">
        <div data-dojo-type="dijit.MenuItem" onClick="click_exon_patient">View Exon/patient coverage</div>
        <div data-dojo-type="dijit.MenuItem" onClick="click_exon">View Exon coverage</div>
        <div data-dojo-type="dijit.MenuItem"onClick="click_patient">View Patient coverage</div>
        <div data-dojo-type="dijit.MenuItem" onClick="click_transcript">View Transcript Coverage</div>
    </div>
    
    <!-- div pour patient name -->
    <div id="popup_patient_name" dojoType="dijit.Dialog" title="Patient Name" style="width:250px" execute="send_print(arguments[0]);">
          <form method="post" class="signin" action="#">
         <fieldset class="textbox">
                <label class="username">
                <span jsId="span_name" id="span_name">Username</span>
                <input id="input_name" name="patient name" value="" type="text" autocomplete="on" placeholder="name">
                </label>
            </fieldset>
            </form>
        <div   type="submit" dojoType="dijit.form.Button"   showLabel="true">
                            <div style='width:150px'>SEND</div>

                  </div>        
    </div>

<div id="login" dojoType="dojox.widget.Dialog" dimensions="[265,160]"   title="Help" onHide="setPassword(arguments[0]);"> 
   <div class="container" style="min-width:250px;max-width:250px;margin-left: auto ;margin-right: auto ;">
   
         <div class="panel panel-success">
          

          <div class="panel-body">     
        <div class="input-group input-group-sm text-success">
            
         <span class="input-group-addon glyphicon glyphicon-user text-success" id="sizing-addon1"></span>
        <label for="username" class="sr-only">Email address</label>
        <input type="text"  id="username" name="username" class="form-control text-primary"  autocomplete="on" placeholder="bipd login" required autofocus aria-describedby="sizing-addon1">
       </div>
          <div class="input-group input-group-sm text-success">
         <span class="input-group-addon glyphicon glyphicon-lock text-success" id="sizing-addon2"></span>
        <label for="passwd" class="sr-only">Password</label>
        <input type="password" id="passwd" name="password" class="form-control  text-primary" placeholder="Password" required aria-describedby="sizing-addon2">
        </div> 
        <button class="btn btn-primary btn-sm btn-x btn-block btn-success" type="submit" onClick="setPassword(arguments[0]);" >Sign in</button>
    </div>
    </div> 
    </div> <!-- /container -->
        </div>


  
     <div id="dialog_help_1" dojoType="dojox.widget.Dialog" sizeToViewport="true"  viewportPadding="130" title="Help" > 
         <div class="panel panel-success">
                <div class="panel-heading">
                     <h2 class="panel-title"> HELP </h2>
                </div>
         <div class="panel-body" id='panel_help'>
          <div class="bs-callout bs-callout-success" style="font-size:15px">
            <h4>Letters stand for <span class='label label-info'>S</span>core <span class='label label-info'>I</span>mpact  <span class='label label-info'>F</span>requence
            </h4>
          </div>
      <div class="bs-callout bs-callout-warning" style="font-size:15px"> 
      <h4> Color highest variation level   for each category  </h4>
                
             <table class="table table-striped table-condensed table-bordered table-hover">
              <tr><th colspan=2>Legend  </th></tr>
                 <tr><td><span class='label label-info'>S</span>core  & <span class='label label-info'>I</span>mpact </td>
    <td style="background-color:#CE0000" class="label">High</td><td style="background-color:#FF8800" class="label">Medium</td><td style="background-color:#95A5A6;color:#FFFFFF" class="label">Low</td></tr><tr><td><span class='label label-info'>F</span>requence </td><td style="background-color:#CE0000" class="label">Unique</td><td style="background-color:#FF8800" class="label">Rare</td><td style="background-color:#EFB73E" class="label">Occasional</td><td style="background-color:#95A5A6;color:#FFFFFF" class="label">Frequent</td></tr>
          </table>
          </div>
          
          </div>
</div>
</div>
    <div dojoType="dijit.Dialog"  jsId="dialog_igv" id="dialog_igv" title="IGV View" style="background-color:white;overflow: auto;" >
    	
            <div class="container-fluid" id="div_igv" style="height:99%;width:99%;"></div>
        </div> 
    <div dojoType="dijit.Dialog" jsId="waiting_variants" id="waiting_variants" style="height:80px" title="VAR PROJECT GENE PATIENT">
        <img id="wait1" src="images/polyicons/wait18trans.gif" align="absmiddle"> <span>Finding all variations...</span>
    </div>
	<div dojoType="dijit.Dialog"  jsId="dialog_list_panels" id="dialog_list_panels" title="List Phenotype(s) / Panel(s)" style="background-color:white;overflow:auto;min-width:250px;" >
		 <span id="span_list_panels"></span>
	</div>
	<div id="dialog_hgmd" dojoType="dijit.Dialog" title="Variants from CNV" style="background-color:white;height:98%;width:98%;">
		<br>
        <div class="container-fluid" id="content_res" style="height:99%;width:99%;"></div>
		<br>
	</div>
	<div id="dialog_list_phenotypes" dojoType="dojox.widget.Dialog" dimensions="[1050,850]" title="List Phenotype(s)"> 
		 <table class="table">
			<tbody>
				<tr>
					<td><div id="container_wordcloud" style="height:450px;border: solid black 1px;"></div></td>
				</tr>
			</tbody>
		</table>
		<br>
		<div class="container-fluid" id="content_table_phenotypes" style="height:99%;width:99%;"></div>
	</div>   
       
    <div id="dialog_genes_in_panel" dojoType="dijit.Dialog" title="Genes in Panel">
        <div  id="content_genes_in_panel" jsId="content_genes_in_panel" data-dojo-type="dijit/layout/ContentPane"></div>	
	</div>
    
	<div id="dialog_dejavu_polycyto" dojoType="dijit.Dialog" title="DejaVu PolyCyto">
        <div  id="content_dejavu_polycyto" jsId="content_dejavu_polycyto" data-dojo-type="dijit/layout/ContentPane"></div>	
	</div>
	
	<div id="popup_dude" dojoType="dojox.widget.Dialog"   sizeToViewport="true" viewportPadding="20" > 
        <div  id="div_popup_dude" jsId="div_popup_dude" data-dojo-type="dijit/layout/ContentPane">	
        	
 		</div>	
	<div id="popup_patients" dojoType="dojox.widget.Dialog"   dimensions = "[750, 650]" sizeToViewport="false" style="width:800px;height:600px;font-size: 10px;font-family:Verdana;width:800px" viewportPadding="10" onHide="var_load_polyviewer=1;refresh_tab_polyviewer();refresh_tab_polydiag();"> 
	  <div id="gridDivPatients" style="font-size: 10px;font-family:Verdana;width:700px;height:600px">
 </div> 
</div>
	<div id="dialog_dejavu_var_infos" dojoType="dijit.Dialog" title="DejaVu Infos">
		<center><a id="url_dejavu_var" href="polydejavu/dejavu.html" target="_blank"><i><u>Go to PolyDejaVu Interface</i></u></a></center>
        <div  id="content_dejavu_var_infos" jsId="content_dejavu_var_infos" data-dojo-type="dijit/layout/ContentPane"></div>	
	</div>

    </body>
</html>
