<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
	<title>Variations List</title>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
	<!-- chargement des feuilles de styles necessaires a l'affichage -->
	<style type="text/css">
			@import "//ajax.googleapis.com/ajax/libs/dojo/1.9.1/dojo/resources/dojo.css";
			@import "//ajax.googleapis.com/ajax/libs/dojo/1.9.1/dijit/themes/claro/claro.css";
			@import "//ajax.googleapis.com/ajax/libs/dojo/1.9.1/dojox/grid/resources/claroGrid.css";
            @import "//ajax.googleapis.com/ajax/libs/dojo/1.9.1/dojox/grid/resources/soriaGrid.css";
			 @import "//ajax.googleapis.com/ajax/libs/dojo/1.9.1/dijit/themes/soria/soria.css";
            @import "//ajax.googleapis.com/ajax/libs/dojo/1.9.1/dojox/grid/resources/Grid.css";
			 @import "//ajax.googleapis.com/ajax/libs/dojo/1.9.1/dojox/grid/resources/nihiloGrid.css";
			 @import "//ajax.googleapis.com/ajax/libs/dojo/1.9.1/dijit/themes/nihilo/nihilo.css";
			  @import "//ajax.googleapis.com/ajax/libs/dojo/1.9.1/dojox/grid/resources/tundraGrid.css";
			 @import "//ajax.googleapis.com/ajax/libs/dojo/1.9.1/dijit/themes/tundra/tundra.css";
			 @import "//ajax.googleapis.com/ajax/libs/dojo/1.9.1/dojox/layout/resources/ExpandoPane.css";
			  @import "//ajax.googleapis.com/ajax/libs/dojo/1.9.1/dojox/widget/Dialog/Dialog.css";
			@import "css/polycss/general.css";
			@import "css/polycss/login.css";
			@import "css/polycss/button.css";
			@import "css/polycss/filter.css";
			@import "viewer/viewer.css";
			@import "css/dejavu/dejavu.css";
			@import "css/polycss/header.css";
			@import "css/polycss/header-footer.css";

html, body {
    width: 100%;
    height: 100%;
    margin: 0;
    overflow:hidden;
}

#borderContainer {
    width: 100%;
    height: 100%;
}

/*.partsContainer .gridContainer table {
	width:475px;
}*/

.testDialog {
	font-size : 8pt;
}



.dojoxGrid-row-odd td {
	background:#e8f2ff;
}


.name {
	color:#2962A7;
	font-weight:bold;
	
}	


		 
 .pconseq {
	background:#DFE8EE;
	background-image: url(images/polyicons/bckgrd_blue.png); 
	padding:1em;
	width:1200px;
	min-width:400px;
	-webkit-box-shadow: 2px 8px 11px #888;
	padding-bottom:20px;
	
	border-left:1px solid #000;
	border-right:1px solid #000;
	border-bottom:1px solid #000;
	border-top:1px solid #000;
}


		 
 .ptranscript {
	background:#DFE8EE;
	background-image:url(images/polyicons/bckgrd_grey.png); 
	padding:1em;
	
	min-width:100px;
	height:15px;
	-webkit-box-shadow: 2px 8px 11px #888;
	padding-bottom:20px;	
	border-left:1px solid #000;
	border-right:1px solid #000;
	border-bottom:1px solid #000;
	border-top:1px solid #000;
}


.pconseq .gridconseq {
	
	background:#fff;
	height:150px;
	position:float; 
	border-top:1px solid #000;
	border-left:1px solid #000;
	border-right:1px solid #000;
	border-bottom:1px solid #000;
}

 
 .partsContainerSmall {
	background:rgb(192,80,77);
	padding:1em;
	background-image: url(images/polyicons/bckgrdsmall.png); 
	-webkit-box-shadow: 2px 8px 11px #888;
	padding-bottom:20px;
	
	border-left:1px solid #000;
	border-right:1px solid #000;
	border-bottom:1px solid #000;
	border-top:1px solid #000;
}

 .partsContainerSmall2 {
	background:beige;
	padding:1em;
	
	-webkit-box-shadow: 2px 8px 11px #888;
	padding-bottom:20px;
	
	border-left:1px solid #000;
	border-right:1px solid #000;
	border-bottom:1px solid #000;
	border-top:1px solid #000;
}

.titleSmall  {
	font-family: Verdana,Arial,Helvetica,sans-serif;

	padding:0.5em 0.5em 0 0.5em;
	color:#000000;
	
	background:rgb(192,80,77);
	font-weight:normal;
	-moz-border-radius-topleft:8px;
	-moz-border-radius-topright:8px;
	-webkit-border-top-left-radius:8px;
	-webkit-border-top-right-radius:8px;
	-webkit-box-shadow: 2px 2px 11px #888;
  	border-top:1px solid #000;
	border-left:1px solid #000;
	border-right:1px solid #000;
}

.partsContainerSmall .gridContainerSmall {
	
	background:#fff;
	height:150px;
	
	border-top:1px solid #000;
	border-left:1px solid #000;
	border-right:1px solid #000;
	border-bottom:1px solid #000;
}

.person_name {
			padding: 3px 3px 3px 25px;	
			font-size: 23px;
		 	font-family: Arial, Helvetica, sans-serif;
		 	color: #ff5500;
			font-weight: bold;
			 text-align: center;
		}
	.titre {
 		 padding: 1px 5px 1px 25px;
		 margin-left: 70px;
		 margin-bottom: 16px;
		 white-space: nowrap;
		 font-size: 12px;
		 font-family: Arial, Helvetica, sans-serif;
		 color: #000000;
		 font-weight: bold;
		 text-align: center;
		  background:url(images/polyicons/button_ok.png) no-repeat center left;
		 }

		 
		 .run {
 		 padding: 1px 1px 1px 25px;
		 margin-left: 50px;
		 margin-bottom: 16px;
		 white-space: nowrap;
		 font-size: 13px;
		 font-family: Arial, Helvetica, sans-serif;
		 color: #000000;
		 font-weight: bold;
		 text-align: center;
		 background:url(images/polyicons/lightning.png) no-repeat center left;
		 }
.span_desc {
	font-family: arial;
	font-size: 10px; 
	 padding: 8px 1px 1px 25px;
	background:url(images/polyicons/star.png) no-repeat center left;
}		 
	
	.alternateDock {
			position:absolute; 
			background-color:#000000; 
			right:0px; top:0px; 
			border-left:1px solid #ccc; 
			height:100%; 
		
		}
		#alternateDock ul.dojoxDockList { display:block; }
.td_align {
	border: 2px solid ;
}

.tundra #toolbar.dijitToolbar {
				height: 50px;
background-image: url(/icons/Polyicons/subtitle_greyblack.png);
				background-repeat: repeat-x;
              
                }
	</style>
	
	
 
    <!-- chargement de scrits necessaires
	  <SCRIPT TYPE="text/javascript" src="../../../dojo-release-1.9.0.0/dojo/dojo.js" djConfig="parseOnLoad: true"></script>
	  
	   -->
	   <script src="//ajax.googleapis.com/ajax/libs/dojo/1.9.1/dojo/dojo.js" djConfig="parseOnLoad: true" type="text/javascript"></script>

	 
	 <!--  
	<script src="//ajax.googleapis.com/ajax/libs/dojo/1.4/dojo/dojo.xd.js"  djConfig="parseOnLoad: true" type="text/javascript"></script>
	<SCRIPT TYPE="text/javascript" src="../../dojo-release-1.3.2/dojo/dojo.js" djConfig="parseOnLoad: true"></script> -->
		<script type="text/javascript" src="https://www.google.com/jsapi"></script>
	 <script type="text/javascript" src="js/polyjs//Utility/vp.js" djConfig="parseOnLoad: true"></script>
	<script type="text/javascript" src="js/polyjs//Utility/utilGrid2.js" djConfig="parseOnLoad: true"></script>
	<script type="text/javascript" src="js/polyjs//Utility/TableFilter2.js" djConfig="parseOnLoad: true"></script>
	<script type="text/javascript" src="js/polyjs/include.js" djConfig="parseOnLoad: true"></script>
	<script type="text/javascript" src="js/polyjs/changeStatus.js"></script>
    <script type="text/javascript" src="js/polyjs/electro.js"></script>
    <script type="text/javascript" src="viewer/variation.js" djconfig="parseOnLoad: true"></script>
	<script type="text/javascript" src="viewer/cnv.js" djconfig="parseOnLoad: true"></script>
	<script type="text/javascript" src="viewer/patient.js" djconfig="parseOnLoad: true"></script>
    <script type="text/javascript" src="viewer/indicator.js" djconfig="parseOnLoad: true"></script>
    <script type="text/javascript" src="viewer/viewer.js" djconfig="parseOnLoad: true">	</script>
    <script type="text/javascript" src="viewer/transcript.js" djconfig="parseOnLoad: true">	</script>
    <script type="text/javascript" src="js/polyjs//Utility/viewVar.js" djConfig="parseOnLoad: true"></script>
	<script type="text/javascript" src="js/polyjs//Utility/my_formatter.js" djConfig="parseOnLoad: true"></script>
	<script type="text/javascript" src="js/polyjs/consequence.js" djConfig="parseOnLoad: true"></script>
    <script type="text/javascript" src="js/polyjs/layoutVar.js" djConfig="parseOnLoad: true"></script>
	<script type="text/javascript" src="js/polyjs//Utility/waiting.js" djConfig="parseOnLoad: true"></script>
	 <script type="text/javascript" src="js/polyjs/igv_methods.js" djConfig="parseOnLoad: true"></script>
	  <script type="text/javascript" src="js/polyjs/alamut_methods.js" djConfig="parseOnLoad: true"></script>
	  <script type="text/javascript" src="js/polyjs/chart_coverage.js"></script>
	  <script type="text/javascript" src="js/dejavu/dejavu.js" djConfig="parseOnLoad: true"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
	    <!--  <script type="text/javascript" src="http://www.dojotoolkit-fr.org/wp-content/uploads/dojo-adapter.js"></script>-->
            <script type="text/javascript" src="https://raw.github.com/highslide-software/highcharts.com/master/js/highcharts.src.js"></script>
            
	<script type="text/javascript">
		
		//chargement de modules dojo necessaires
	
		dojo.require("dijit.layout.ContentPane");
		dojo.require("dijit.layout.LayoutContainer");
		dojo.require("dojox.layout.ExpandoPane");
		dojo.require("dijit.MenuBar");
		dojo.require("dojo.cookie");
		dojo.require("dojox.grid.DataGrid");
		dojo.require("dijit.layout.AccordionContainer");
		dojo.require("dijit.Toolbar");
        dojo.require("dijit.layout.TabContainer");
		dojo.require("dijit.Dialog");		
		//dojo.require("dojo.data.ItemFileReadStore");
		dojo.require("dojo.parser");	
		dojo.require("dijit.layout.BorderContainer");
		dojo.require("dijit.layout.SplitContainer");
        dojo.require("dijit.form.Button");
	    dojo.require("dojox.gfx");
        dojo.require("dojo.colors");
        dojo.require("dijit.Dialog");
		 dojo.require("dijit.TooltipDialog");
		dojo.require("dijit.form.FilteringSelect");
		  dojo.require("dijit.form.CheckBox");
		  dojo.require("dijit.form.Slider");
		 dojo.require("dijit.form.HorizontalRule"); 
		dojo.require("dijit.form.Select");
      	 require([ "dojox/widget/DialogSimple", "dojox/widget/Dialog","dijit/MenuBar", "dijit/MenuBarItem", "dijit/PopupMenuBarItem","dijit/DropDownMenu", "dijit/MenuItem"]);
		//recupration des valeurs contenues dans les input cachs (cf title.html)
	var chr_number;
	var select_coverage;
	var user_name;
	var progress_drawing =0;
	var project_type = param('type');
		var projectName = param('project');
		//var projectId =parent.haut.document.getElementById('project_id').value;
		var selectGene = param('gene');
		var selectGeneName = param('genename');
		if ((selectGeneName) && (selectGene)) { document.title = selectGeneName+" ["+selectGene+"]"; }
		else if (selectGene) document.title = selectGene ;
		var gene_name = selectGene;
		var reference = param('reference');
		var model = param('model') + ' [' + param('famind') + ']';
		var ids = param('ids');
		var no_graph = param('no_graph');
		var chromosome_name = param('chromosome');
		var xref;
		var projectId;
		//definition des diffrentes url pour rcuprer les donnes grace aux cgi
		var groupurl = url_query+"?type=group&projectName="+projectName;
		
		var groupexporturl = url_query+"?type=group&projectName="+projectName+"&xls=1";
		var geneexporturl = url_query+"?type=gene&projectName="+projectName+"&xls=1";
		
		// url for patients
		var detailurl = url_query+"?type=patient&projectName="+projectName;
		var detailexporturl = url_query+"?type=patient&projectName="+projectName+"&xls=1";
		
		// url for traces
		var traceurl = url_query+"?type=trace&projectName="+projectName;	
		var traceexporturl = url_query+"?type=trace&projectName="+projectName+"&xls=1";
			
		//var indelexporturl = url_query+"?type=indel&projectName="+projectName+"&xls=1"+"&selectGene="+selectGene;
		//var oligourl=url_query+"?type=oligo&id="+projectId;
		//var oligoexporturl =url_query+"?type=oligo&id="+projectId+"&xls=1";
		
        // url pour le rapport 
        var reporturl=url_query+"?type=report&projectName="+projectName;
        var reportexporturl = url_query+"?type=report&projectName="+projectName+"&xls=1";
//      var username = dojo.cookie("username");
        var arguments ="?project="+projectName+"&type=variations"+"&chromosome="+chromosome_name+"&ids="+ids;
        var url_consequence;
        var varurl = url_cache_variation+arguments; 
        var is_cache_url = is_cache+"?project="+projectName+"&type=all";        
        var patient_url = url_cache_patient+arguments;      
        var indelurl= url_cache_variation+arguments;
        var transcripts_url = url_cache_transcripts+arguments;
        var geneurl = url_genes_infos+arguments;    
	
		
		var grid_current_annex;
		var current_electro;
		var lastDejaVuInput;
		var b_dejavu_gene = 'b_dejavu_gene';
		var launchDejaVu = "false";
		
		
	
		//layout pour le tableau de rsultats concernant les patients
		var layoutPatient = [
		
				{ name: "Row", get: getRow, width:2, styles: 'text-align:center;'},
				{ name: "Name",field: "name", width: 10, styles: 'text-align:center;' },
				{ name: "Nb traces",field: "nb_traces", width:10, styles: 'text-align:center;'},
				{ name: "Not aligned",field: "trace_na", width:10, styles: 'text-align:center;'},
				{ name: "Nb variations",field: "nb_var", width:8,styles: 'text-align:center;'}	
			
		];
		
		//layout pour le tableau de rsultats concernant les groupes
		var layoutGroup = [
		
			
				{ name: "Row", get: getRow, width:2, styles: 'text-align:center;'},			
				{ name: "Name",field: "name",  width: 15, styles: 'text-align:center;'},
				{ name: "Reference",field: "reference",  width: 10, styles: 'text-align:center;'},
				{ name: "Analyse",field: "valid", width: 3 , styles: 'text-align:center;'}
				
		
		];
		
		//layout pour le tableau de rsultats concernant les traces
		var layoutLectures = [
		
				{ name: "Row", get: getRow, width:2, styles: 'text-align:center;'},	
				{ name: "Name",field: "name",  width: 20, styles: 'text-align:center;'},
				{ name: "Patient",field: "patient", width: 6 , styles: 'text-align:center;'},
				{ name: "Oligo",field: "oligo", width: 7 , styles: 'text-align:center;'},	
				{ name: "Quality",field: "quality", width: 3 , styles: 'text-align:center;'},
				{ name: "Length",field: "longueur", width: 3 , styles: 'text-align:center;'},
				{ name: "Is Aligned",field: "isAligned", width: 3,formatter: formatAlign, styles: 'text-align:center;'}
				
				
		
		];

		//layout pour le tableau de rsultats concernant les indels
	
			//layout pour le tableau de rsultats concernant les indels
		
		
	
		
		//layout pour le tableau de rsultats concernant les report
		var layoutReport = [
			
			
				{ name: "Row", get: getRow, width:2, styles: 'text-align:center;'},	
				{ name: "Name",field: "name",  width: 12, styles: 'text-align:center;'},
				{ name: "Allele",field: "text", width: 3 , styles: 'text-align:center;'},
				{ name: "Position",field: "start", width: 8 , styles: 'text-align:center;'},	
				{ name: "Patients",field: "patient", width: 10 , styles: 'text-align:center;'},
				{ name: "Bipd",field: "bipd", width: 6 , styles: 'text-align:center;'},
				{ name: "Polyphred",field: "polyphred", width: 6 , styles: 'text-align:center;'},
				{ name: "Gseq",field: "gseq", width: 6 , styles: 'text-align:center;'},
				{ name: "Consequence",field: "consequence",styles: 'text-align:center;'},
				{ name: "Group",field: "group", width: 7 , styles: 'text-align:center;'},
				{ name: "Reference",field: "reference", width: 10 , styles: 'text-align:center;'},
				{ name: "Filter",field: "filterStar", width: 5 , styles: 'text-align:center;'},
				{ name: "Valid",field: "valid", width: 3 , styles: 'text-align:center;'},
				{name: "polyphen<br>status",field: "polyphen_status",width: 5,styles:'text-align:center;'} 
			
		];
		
		
		//fonction qui contient les instructions  excuter au chargement de la page		
		function init() {
			var t = dojo.byId("patientStore");
		}
		
		//fonction appelee au chargement de la page
		dojo.addOnLoad(init);
        dojo.ready(checkPassword_dejavu_local);

	
	
	
	//fonction appele quand un double click est effectu sur le tableau gridGroup (celui des groupes d'oligos)
	viewGroup = function(e){
		var i = e.rowNode.gridRowIndex;	
		//recupre le nom du groupe et le nom de la rfrence pour la ligne selectionne
		var name=gridGroup.getCell(1).getNode(i).textContent;	
		var refname=gridGroup.getCell(2).getNode(i).textContent;	
		//appelle la fonction detailGroup avec les valeurs rcupres
		detailGroup(name,refname);
	}
	

	
	//fonction appele quand double click sur tableau gridIndel (celui des indel)
	viewIndel =function(e){
		var i = e.rowNode.gridRowIndex;
		var name=gridIndel.getCell(1).getNode(i).textContent;	
	
	
			var store = readStore(indelurl);
			store.fetch({
				query: {
					name: name
				},
				onComplete: detailVar
			
			});
				
		//detailIndel(name);
	}
	  
	  
         
	 //fonction appele par viewIndel
	 function detailIndel(name){
	 
		var zurl = "detailVar.html?project="+projectName+"&variation="+name+"&reference="+reference+"&gene="+selectGene;
		var fenetre =window.open(zurl,name,config=' toolbar=no, menubar=no, scrollbars=yes, resizable=no, location=no, directories=no, status=no');
     }
     
	
	
	
	
	
	//fonction appele par viewPatient		
	function detailPatient(name){
		//renseigne le input id= namepatient dans title.html (utiliser ensuite par la page detailPatient.html)
       
		//ouvre la page detailPatient.html
       document.location.href = "detailPatient.html"
    }
	
     // fonction appele quand double click sur tableau gridVar (celui des variations)        
	viewVar =function(e){

		var i = e.rowNode.gridRowIndex;	
		var name=gridVar.getCell(1).getNode(i).textContent;	
		var user_name = dojo.cookie("username");	
			var store = readStore(varurl+"&user="+user_name);
			store.fetch({
				query: {
					name: name
				},
				onComplete: detailVar
			
			});
		
		
	}
	  
	  //fonction appele par viewVar
	 function detailVar(items,e){
	 	
	 	//ouvre la page detailVar.html dans une nouvelle fenetre
		var name = items[0].name;
		var zurl = "detailVar.html?project="+projectName+"&variation="+name+"&reference="+reference+"&gene="+selectGene+"&contig="+items[0].group+"&varid="+items[0].id;
	
	 	var fenetre =window.open(zurl,name,config=' toolbar=no, menubar=no, scrollbars=yes, resizable=no, location=no, directories=no, status=no');
		//passe  la fenetre des valeurs utiles pour son chargement
     }
           
	//fonction contenant les instructions  executer au chargement de la page
	dataLoad = function () {
		 user_name = dojo.cookie("username");	
		// load list gene
		
		//fonction pour la partie graphic view (cf ./viewer/viewer.js)
		
	
		
		//creation des filtre pour la table gridVar

	  	isCache(is_cache_url+"&user="+user_name);
	
		document.getElementById("pconseq").style.visibility = "hidden";	
		document.getElementById("csmall").style.visibility = "hidden";
			
		//si simple clique sur une ligne-> appel de la fonction consequenceOver (affichage du tableau gridConsequence pour la variation selectionne)
//		dojo.connect(gridVar,'onCellClick',uploadFile);
        dojo.connect(gridVar,'onRowClick', consequenceOver);
        dojo.connect(gridVar,'onRowClick', nbLinesSelected);
        dojo.connect(gridVar,'onRowClick', coverageOthersProjects);
		//si double click sur une ligne-> appel de la fonction viewVar (affichage de la variation en detail)
	   // dojo.connect(gridVar,'onDblClick' ,drawingUpload);
		
		dojo.connect(gridAnnex,'onRowClick' ,selectPatient);

		filterTranscript.set("store",  new dojo.data.ItemFileWriteStore({
			url: transcripts_url
		}));
		 
		//filterPatientName.set("store", readStore(patient_url) );
		//filterPatientName.store= readStore(patient_url);
		//
	}



$(document).ready(function() {
    $("#map").scroll(function () { 
            $("#drawing_transcripts").scrollLeft($("#map").scrollLeft());
            $("#drawing_patients").scrollLeft($("#map").scrollLeft());
        });
    $("#drawing_transcripts").scroll(function () { 
            $("#map").scrollLeft($("#drawing_transcripts").scrollLeft());
            $("#drawing_patients").scrollLeft($("#drawing_transcripts").scrollLeft());
        });
    $("#drawing_patients").scroll(function () { 
            $("#map").scrollLeft($("#drawing_patients").scrollLeft());
            $("#drawing_transcripts").scrollLeft($("#drawing_patients").scrollLeft());
        });
});

var firstViewer = 0;  
function test_init_viewer(){
	if (firstViewer == 0 ) {
        dijit.byId('waiting').show();
        initViewer();
        when_external_loaded_graph (function () {
            testx();
        });
    }
	firstViewer = 1;
}	

function	run_after_waiting() {
				/* ici je lance la vue graphique */
				if (!no_graph) {
					//initViewer();
				}
				varurl+="&user="+user_name;
				
				createFilter(varurl, ["consequence!all","type","filter","public"],gridVar,"filterTable",{allpatients:"patient",name:"name",start:"Position"});
				
				resizeDiv('gridVar','local_var',900);
}

//executer la fonction dataLoad au chargement de la page
//var geneurl = url_query+"?type=gene&projectName="+projectName;
	
var layoutAnnex;	
var genome_version ;	
	 function okfunction (items, request){
		if (items.length==0) {
			dijit.byId('login').show();
			return;
		};
		document.getElementById("stat_project").textContent= projectName;
		document.getElementById("stat_description").textContent= "\""+items[0].description+"\"";
	
		lock_button.set("label", dojo.cookie("username"));
		genome_version = items[0].genome_version[0];
		project_type = items[0].type;
		//filterProject.store = readStore(urlpasswd);
		//filterProject.setValue(items[0].name);
		setLayoutVar("variations",gridVar);
	
		setLayoutVar("annex",gridAnnex);
		setLayoutVar("consequence",gridConsequence);
		var jsonStore = readStore(geneurl);
	    if (selectGene =="all") selectGene= '*';
		jsonStore.fetch({
				query: {
					name: selectGene
				},
				onComplete: geneLoading,
				onError: error,		
			});	
			
	
	
		dataLoad();
		//indel();
		
	}
var min_position;
var max_position;
	 
	 function geneLoading(items,z){
		if (items.length == 1) {
			document.getElementById("stat_name").innerHTML = items[0].complete_name;
			document.getElementById("stat_gene_description").innerHTML = items[0].description+"";
			document.getElementById("stat_position").innerHTML = items[0].position;
			document.getElementById("stat_variations").innerHTML = items[0].variations;
            document.getElementById("stat_filter_model").innerHTML = model;
				}
		else {
			/*
			document.getElementById("lchr").innerHTML = items[0].chromosome;
			document.getElementById("lst").innerHTML = items[0].start;
			document.getElementById("lend").innerHTML = items[items.length - 1].end;
			document.getElementById("view_chr").innerHTML = items[0].chromosome;
			*/
		}
		
		//label_start.innerHtml = items[0].start;
		//dijit.byId('labelEnd').innerHtml = items[0].end;
		
		
	 }
	 
	 
	 
	  dojo.addOnLoad(function() {
			checkPassword(projectName,okfunction);
	
		}
		);
		
	  
	  //fonction pour revenir  la page listant les projets
	  function goBack(){
		 parent.bas.location.href ="projectList.html";
	}
	
	
	var old_click;
	
	//fonction appele quand on choisit l'onglet group 
//	function group() {
//		//fonction viewGroup  executer si double click sur tableau
//		 dojo.connect(gridGroup,'onRowDblClick' ,viewGroup);
//		 createFilter(groupurl, ["name"],gridGroup,"filterTableGroup",{name:"Name",reference:"Reference",analyse:"Analyse"});
//	}
//	
//	//fonction appele quand on choisit l'onglet gene 
//
//	
//	//fonction appele quand on choisit l'onglet patient 
//	function patient() {
//		dojo.connect(gridPatient,'onRowDblClick' ,viewPatient);
//		createFilter(detailurl,["name"],gridPatient,"filterTablePatient",{name:"Name"});
//	}
//	
//	//fonction appele quand on choisit l'onglet trace
//	function trace() {
//		 dojo.connect(gridTrace,'onRowDblClick',downLoad);
//         createFilter(traceurl, ["patient","oligo"],gridTrace,"filterTableTrace",{patient:"Patient",oligo:"Oligo",name:"Name",isAligned:"Is Aligned"});
//	}
//	
//	//fonction appele quand on choisit l'onglet report
//	function report() {
//		 createFilter(reporturl, ["group","consequence"],gridReport,"filterTableReport",{name:"Variation name",reference:"Reference",group:"Group",valid:"Valid",start:"Position"});
//	}
	
	//fonction appele quand on choisit l'onglet indel
	function indel() {
		
		 dojo.connect(gridIndel,'onRowDblClick' ,viewIndel);
		 dojo.connect(gridIndel,'onRowClick' ,IndelOver);
		 dojo.connect(gridCover,'onRowClick' ,selectPatient);
		
		document.getElementById('gridIndel').style.width = "780px";
		 createFilter(indelurl, ["valid"],gridIndel,"filterTableIndel",{name:"Indel name",valid:"Valid",start:"Position"});
		initSpecialFilter(indelurl,filterTranscriptindel);
		setLayoutVar("indels",gridIndel);
		setLayoutVar("cover",gridCover);
		
		resizeDiv('gridIndel','local_indel');
	
		
	}

	
	
var firstview =0;

//fonction pour afficher un message indiquant le chargement des donnes
function testx(){
	if (!drawingOK){
		if (dijit.byId('waiting')) {
			dijit.byId('waiting').show();
		}
	}
	else {
	    if (dijit.byId('waiting')) {
			dijit.byId('waiting').hide();
		}
	}
}	

var url_cover = url_query + "?type=cover"+ "&projectName=" + projectName +"&varid=";
var url_annex = url_query + "?type=annex"+ "&projectName=" + projectName +"&varid=";


 function viewCover(items, request){
 	alert("graph");
 	return;
 /*		if (project_type == "ngs") {
			var jsonStore = new dojo.data.ItemFileReadStore({
				url: url_cover + items[0].id + "&object_type=" + items[0].type
			});
			//gridCover.setStore(jsonStore);
			viewAnnex(items,request);
		}
		else {*/
			 grid_current_annex = gridCover;
			 current_electro= "tableElectro_indel";
			viewAnnex(items,request);
		//}
 }


IndelOver =function(e){
		//if (project_type != "ngs") return ;
			var i = e.rowNode.gridRowIndex;	
		//recupre les donnes de la ligne qui sont dans la 1ere cellule (commence  0)
		var name=gridIndel.getCell(1).getNode(i).textContent;	
	
			var store = readStore(indelurl);
			store.fetch({
				query: {
					name: name
				},
				onComplete: viewCover,
				onError:jsonError
			});
			
		var i = e.rowNode.gridRowIndex;	
		//recupre les donnes de la ligne qui sont dans la 1ere cellule (commence  0)
		var name=gridIndel.getCell(1).getNode(i).textContent;	
	
		
	}
	
	
	
	
	var indexNomenclature;
	
	function addNomenclature() {
		
		if (!gridVar.structure) return; 
		var layoutVariation = gridVar.structure;
		if (!indexNomenclature) indexNomenclature = findColumnIndex(layoutVariation,"Nomenclature");
		
		layoutVariation[indexNomenclature]["name"] = filterTranscript.getDisplayedValue();
	
		layoutVariation[indexNomenclature]["field"] = "nomenclature!"+filterTranscript.getValue();
 		var zz = findColumnIndex(layoutVariation,"Consequence");
		layoutVariation[zz]["field"] = "consequence!"+filterTranscript.getValue();
		var yy = findColumnIndex(layoutVariation,"polyphen<br>status");
		layoutVariation[yy]["field"] = "polyphen!"+filterTranscript.getValue();	
		gridVar.setStructure(layoutVariation);
		if  (filterTranscript.getValue() == "all") {		
			document.getElementById("ptranscript").style.backgroundImage = 'url(/icons/Polyicons/bckgrd_grey.png)';
			
		}

	}
	
	 //   fonction appele quand double click sur tableau gridPatient (celui des patients)    
	var patient_select = "all";
	viewPatient = function(e){
	
		var filter;
		var i = e.rowNode.gridRowIndex;	
		var name=gridPatient.getCell(1).getNode(i).textContent;	
		filterPatientName.setValue(name);
	
		lhtabs.selectChild(rhtab4);
		
		return;
	
		
	}
	
	var patient_name_filter;
	var tab_id_patientFilter;
	var indexValid;
	function filterPatient(ft,grid) {
		var filter;
		var name=ft.getValue();
		if (name =='') name ='all';
		patient_name_filter = name;	
		var layout = gridVar.structure;
		if (!indexValid) indexValid = findColumnIndex(layout,"Valid");
		if (name == "all") {
		patient_name_filter ="";	
		layout[indexValid]["name"] = "valid";
		layout[indexValid]["field"] = "valid";
		grid.setStructure(layout);
		grid.filter({"allpatients": "*"});	
		return;
		}
		
		tab_id_patientFilter = 0;
		
		
	
		layout[indexValid]["name"] = name;
		layout[indexValid]["field"] = "valid!"+name;
		//layoutVariation[12]["formatter"] = formatValidWithFilter;
		grid.setStructure(layout);
		grid.filter({"allpatients": "*" + name + "*"});	
	
	}

function addNomenclatureIndel() {
	
	
		document.getElementById("ptranscriptindel").style.backgroundImage = 'url(/icons/polyicons/bckgrdsmall.png)';
		 dijit.byId("5471").attr("iconClass", "exportIcon");
		
		b5471.setDisabled(false);
		
		var layoutIndel = gridIndel.structure;
	
		layoutIndel[2]["name"] = filterTranscriptindel.getDisplayedValue();
		layoutIndel[2]["field"] = "nomenclature!"+filterTranscriptindel.getValue();
		layoutIndel[7]["field"] = "consequence!"+filterTranscriptindel.getValue();
	 	gridIndel.setStructure(layoutIndel);
		if  (filterTranscriptindel.getValue() == "all") {		
			document.getElementById("ptranscriptindel").style.backgroundImage = 'url(/icons/polyicons/bckgrd_grey.png)';
			dijit.byId("5471").attr("iconClass", "reportIcon");
			b5471.setDisabled(true);
			
		}
		
	}
	function generate_report(type){
		var name;
		if (type == "variation") {
			name = filterTranscript.getValue();
		}
		else {
			name= filterTranscriptindel.getValue();
		}
		
		if (!name || name == "all") {
			alert("choose a transcript first ");
			return 1;
		}
		
		var url = url_report+"?project="+projectName+"&transcript="+name+"&type="+type;
		
		window.location=url;
	}
	function viewTracesForPosition(){
		var chr = document.getElementById("trace_chromosome").innerHTML;
		var position = trace_position.value;
	//	document.location.href = "detailProject.html?project="+projectName+"&gene="+items[0].name+"&reference="+items[0].reference+"&type="+project_type+"&ids="+items[0].ids;
		
	  var zurl = "detailVar.html?project="+projectName+"&chromosome="+chr+"&genomic_position="+position;
	
	 	var fenetre =window.open(zurl,name,config=' toolbar=no, menubar=no, scrollbars=yes, resizable=no, location=no, directories=no, status=no');
	}


function viewIGV () {
	//alert(chromosome);
	var items= gridVar.selection.getSelected();
	var chr = items[0].chromosome;
	var start = items[0].start;
	var end = items[0].end;
	displayInIGV(chr,start,end);
	
}
function viewAlamut() {
	//alert(chromosome);
	var items= gridVar.selection.getSelected();
	var chr = items[0].chromosome;
	var start = items[0].start;
	var end = items[0].end;
	var z = items[0].text+"";
	
	//displayInIGV(chr,start,end);
	var a = z.split("/");
	displayInAlamut(chr,start,a);
}

function polyphen (){
	var polyphen2 = "//genetics.bwh.harvard.edu/cgi-bin/ggi/ggi2.cgi?&_ggi_project=PPHWeb2&_ggi_origin=query&_ggi_target_pipeline=Submit%20Batch&"+"_ggi_batch=";//chr1:1267483 G/A";
	var items= gridVar.selection.getSelected();
	var text2 ="";
	if(items.length == 0) {
		alert_txt();
		return;
		}
	for (var i = 0; i < items.length; i++) {
		var chr = items[i].chromosome;
		var start = items[i].start;
		var allele = items[i].text;
		
		text2 += "chr" + chr + ":" + start + " " + allele+"\n";
	}
	var uniqueID = new Date();
	//var fenetre =window.open(polyphen2+text2,"test");
	var textarea = document.getElementById("_ggi_batch");
	 var sdata;
	 sdata = "<form id='form_polyphen' method='post' action='//genetics.bwh.harvard.edu/cgi-bin/ggi/ggi2.cgi' enctype='multipart/form-data'> <input type='hidden' name='_ggi_project' value='PPHWeb2' />";
	 
		sdata += "<input type='hidden' name='_ggi_origin' value='query' />";
		sdata += "<input type='hidden' name='_ggi_target_pipeline' value='=Submit Batch' />";
		sdata += "<TEXTAREA  id='_ggi_batch' name='_ggi_batch' >"+text2+"</TEXTAREA>";
		sdata += "<input type='hidden' name='_ggi_target_pipeline' value='=Submit Batch' />";
		sdata += "<input type='submit' name='_ggi_target_pipeline' value='Submit Batch' />";
		if (genome_version == "HG19") {
			sdata += "<option selected='selected' value='hg19'>GRCh37/hg19</option><option value='hg18'>NCBI36/hg18</option></select>";
		}
		else {
			sdata += "<option  value='hg19'>GRCh37/hg19</option><option selected='selected' value='hg18'>NCBI36/hg18</option></select>";
		}
   		sdata += '</form>	';
		sdata += "<script type='text/javascript'>";
		sdata += "document.getElementById('form_polyphen').submit('Submit Batch');";
	
		sdata +="</sc" + "ript>";
		OpenWindow=window.open("",uniqueID.getTime());
		OpenWindow.document.write(sdata);
		 
	

}
function alert_txt (){
	alert ("select snp first");
}
function sift() {
	var items= gridVar.selection.getSelected();
	var text2 ="";
	if(items.length == 0) {
		alert_txt();
		return;
		}
	for (var i = 0; i < items.length; i++) {
		var chr = items[i].chromosome;
		var start = items[i].start;
		var allele = items[i].text;
		
		text2 +=  chr + "," + start + ",1," + allele+"\n";
	}
	
	var sdata = "<FORM ID='form_sift' ENCTYPE='MULTIPART/FORM-DATA' METHOD='POST' ACTION='//sift.jcvi.org/sift-bin/SIFT_feed_to_chr_coords.pl'>";
	
	sdata += "<select name='organism' id='organism'>";
	if (genome_version == "HG19") {
		sdata += "<option value='Human_db_37'>Homo sapiens NCBI 37 Ensembl 61</option>";
	}
	else {
		sdata += "<option value='Human_db'>Homo sapiens NCBI 36 Ensembl 41</option>";
	}
  			
		sdata += "	</select>";

			
		sdata += "	<TEXTAREA NAME='CHR' ROWS=15 COLS=50>"+text2+"</TEXTAREA>";
		
		sdata += "	<input type='checkbox' name='oo1' value='1' checked='checked' > Ensembl Gene ID<br>";

		sdata += "	<input type='checkbox' name='oo2' value='1' checked='checked'> Gene Name<br>";
		sdata += "	<input type='checkbox' name='oo3' value='1' checked='checked' > Gene Description<br>";
		sdata += "	<input type='checkbox' name='oo4' value='1' checked='checked' > Ensembl Transcript Status (Known / Novel)<br>";
		sdata += "	<input type='checkbox' name='oo5' value='1' checked='checked'> Ensembl Protein Family ID<br>";
		sdata += "	<input type='checkbox' name='oo6' value='1' checked='checked'> Ensembl Protein Family Description<br>";

			sdata += "<input type='checkbox' name='oo7' value='1' checked='checked' > Protein Family Size<br>";
		sdata += "	<input type='checkbox' name='oo8' value='1' checked='checked'> Ka/Ks (Human-mouse)<br> ";
		sdata += "	<input type='checkbox' name='oo9' value='1' checked='checked'> Ka/Ks (Human-macaque)<br>";
		sdata += "	<input type='checkbox' name='oo10' value='1' checked='checked'> OMIM Disease<br>";
		sdata += "	<input type='checkbox' name='oo11' value='1' checked='checked'> Allele Frequencies (All Hapmap Populations - weighted average)<br>";

			sdata += "<input type='checkbox' name='oo12' value='1' checked='checked'> Allele Frequencies (CEU Hapmap population)<br>";
		sdata += "	<input type='checkbox' name='oo13' value='1' checked='checked'> Allele Frequencies (ASW Hapmap population)<br>";
			sdata += "<input type='checkbox' name='oo14' value='1' checked='checked'> Allele Frequencies (CHB Hapmap population)<br>";
			sdata += "<input type='checkbox' name='oo15' value='1' checked='checked' > Allele Frequencies (CHD Hapmap population)<br>";
			sdata += "<input type='checkbox' name='oo16' value='1' checked='checked'> Allele Frequencies (GIH Hapmap population)<br>";

			sdata += "<input type='checkbox' name='oo17' value='1' checked='checked'> Allele Frequencies (JPT Hapmap population)<br>";
		sdata += "	<input type='checkbox' name='oo18' value='1' checked='checked' > Allele Frequencies (LWK Hapmap population)<br>";
		sdata += "	<input type='checkbox' name='oo19' value='1' checked='checked'> Allele Frequencies (MEX Hapmap population)<br>";
		sdata += "	<input type='checkbox' name='oo20' value='1' checked='checked' > Allele Frequencies (MKK Hapmap population)<br>";
		sdata += "	<input type='checkbox' name='oo21' value='1' checked='checked'> Allele Frequencies (TSI Hapmap population)<br>";

		sdata += "	<input type='checkbox' name='oo22' value='1' checked='checked'> Allele Frequencies (YRI Hapmap population)<br>";
		

		
		 sdata += " </FORM>";
		 sdata += "<script type='text/javascript'>";
		sdata += "document.getElementById('form_sift').submit('Submit Batch');";

		sdata +="</sc" + "ript>";
		 var uniqueID = new Date();
		OpenWindow=window.open("",uniqueID.getTime());
		OpenWindow.document.write(sdata);
		 
		 
}
      function zoomCoverage(tr){
        
     
       var url = url_coverage+"?project="+projectName+"&span=0&limit=5&patients=all&exome=1&transcripts="+tr;
            dijit.byId("popup_coverage").show();
            dijit.byId("div_popup_coverage").setHref(url);
        
      }
        
function show_coverage() {
 	var url = url_coverage_overview+"?project="+projectName+"&span=0&limit=5&patients=all&exome=1&gene="+gene_name;
	table_coverage.setHref(url);
	//polyweb_coverage.setHref("tets.html?gene="+gene_name);
}
 
function openPopup_hecomp(value) {
    var myDialog = dijit.byId(value);
    myDialog.show();
}
 
function nbLinesSelected() {
    var listVarNames = getVarIdFromSelectedVar();
    if (listVarNames.length == 2) { dijit.byId("bHeComp").set('disabled', false);
    dijit.byId("bHeComp").set('iconClass', "hecompIcon");
     }
    else { dijit.byId("bHeComp").set('disabled', true);
	  dijit.byId("bHeComp").set('iconClass', "hecompIconnb");
    }
}

function show_dejavu() {
 	LoginOk = true;
 	document.getElementById("id").value = gene_name;
 	checkPassword_dejavu();
 	//launchId(gene_name);
}

function show_HeComp() {
    var listVarNames = getVarIdFromSelectedVar();
    if (listVarNames.length == 2) {
        dijit.byId("gridLogLocal").filter({projName: "NONE"});
        openPopup_hecomp('popupHeComp');
        var inputId = listVarNames.join(',');
        launchHeComp(inputId, 'gridHeCompLocal', projectName);
        when_external_loaded (function () {
            getDetails_HeComp();
        });
    }
}

function when_external_loaded (callback) {
    var item = dijit.byId("gridHeCompLocal").getItem(0);
    if (item == null) {
        setTimeout (function () {
            when_external_loaded (callback);
        }, 100);
    } else { callback (); }
}

function when_external_loaded_graph (callback) {
    var isEmpty1 = $('#drawing_transcripts').is(':empty');
    var isEmpty2 = $('#drawing_patients').is(':empty');
    if(isEmpty1 || isEmpty2) {
        setTimeout (function () {
            when_external_loaded_graph (callback);
        }, 100);
    } else { callback (); }
}


function getDetails_HeComp() {
    var item = dijit.byId("gridHeCompLocal").getItem(0);
    var val_var = dijit.byId("gridHeCompLocal").store.getValue(item, "var_1");
    if (val_var == 'No Result...') { dijit.byId("gridLogLocal").filter({projName: "None"}); }
    else {
        var val_proj = dijit.byId("gridHeCompLocal").store.getValue(item, "nbProj");
        var toFilter = val_proj.replace(/; /g, "|");
        var item = dijit.byId("gridHeCompLocal").getItem(0);
        var val_var = dijit.byId("gridHeCompLocal").store.getValue(item, "var_1");
        if (val_var == "No result...") {
            toFilter = 'NONE';
            openPopup_hecomp('popupHeComp_noResult');
            dijit.byId("popupHeComp").hide();
        }
        details_local();
        dijit.byId("gridLogLocal").filter({projName: "*"});
        dijit.byId("gridLogLocal").filter({projName: new RegExp(toFilter)});
    }
    dijit.byId("gridLogLocal").render();
    dijit.byId("gridHeCompLocal").render();
}

function details_local() {
    var details = new Object();
    var patients = new Object();
    var grid = dijit.byId("gridHeCompLocal");
    var item = grid.getItem(0);
    var val_var = dijit.byId("gridHeCompLocal").store.getValue(item, "var_1");
    if (val_var == "No result...") {
        document.getElementById("details_projNok_local").innerHTML = "<b><u>[ Not Authorized Project: </b></u> 0";
        document.getElementById("details_projOk_local").innerHTML = "<b><u>Authorized Project: </b></u> 0<b><u> ]</b></u>";
        hashPatient[''] = 0;
    }
    else {
        dojo.forEach(grid.store.getAttributes(item), function(attribute) {
            var value = grid.store.getValues(item, attribute);
            if (attribute == "nbProj") {
                var tmp = new String(value);
                var tab = tmp.split("; ");
                var ok = 0;
                var nok = 0;
                dojo.forEach(tab, function(projName){
                    if (projName == "X") { nok += 1; }
                    else { ok += 1; }
                });
                document.getElementById("details_projNok_local").innerHTML = "<b><u>[ Not Authorized Project: </b></u> " + nok;
                document.getElementById("details_projOk_local").innerHTML = "<b><u>Authorized Project: </b></u>" + ok + "<b><u> ]</b></u>";
            }
            if (attribute == "nbPat") {
                var tmp = new String(value);
                var tab = tmp.split("|");
                tmp = tab[1];
                tab = tmp.split("; ");
                dojo.forEach(tab, function(patName){
                    var tmp2 = patName.split(" [");
                    var project = tmp2[0];
                    var pat = tmp2[1].replace("]", "");
                    hashPatient[project] = pat;
                });
            }
            details[attribute] = value;
        });
    }
}

function checkPassword_dejavu_local() {
    var user = null;
    var pass = null;
    user = dojo.cookie("username");
    pass = dojo.cookie("passwd");
    dataStore_log = new dojo.data.ItemFileReadStore({ url: url_checkLogin + "?login=" + user + "&pwd=" + pass });
    var gridLog = dijit.byId("gridLogLocal");
    gridLog.setStore(dataStore_log);
    gridLog.store.fetch();
    dijit.byId("gridLogLocal").filter({projName: "NONE"});
}

function getVarIdFromSelectedVar() {
    var grid = dijit.byId("gridVar");
    var listVarNames = [];
    dojo.forEach(grid.selection.getSelected(), function (item,i) {
        var id = grid.store.getValue(item,"id");
        listVarNames.push(id);
    })
    return listVarNames;
}

function getDejaVuFromSelectedVar() {
    var grid = dijit.byId("gridVar");
    var dejavu = grid.store.getValue(grid.selection.getSelected()[0], "bipd_db");
    return dejavu;
}

function coverageOthersProjects() {
    var listVarNames = getVarIdFromSelectedVar();
    if (listVarNames.length == 1) {
        var gridCovYourProj = dijit.byId("gridCovYourProj");
        var gridCovOtherProj = dijit.byId("gridCovOtherProj");
        if (getDejaVuFromSelectedVar() == "-") {
            gridCovYourProj.filter({id: 'NONE'});
            gridCovOtherProj.filter({id: 'NONE'});
        } 
        else {
            var user = dojo.cookie("username");
            var pass = dojo.cookie("passwd");
            var urlLaunch = url_path + "polydejavu/dejavu_bypatient_cgi.pl";
            var datastore_cov = new dojo.data.ItemFileReadStore({ url: urlLaunch + "?login=" + user + "&pwd=" + pass + "&input=" + listVarNames[0] + "&thisproject=" + projectName });
            gridCovYourProj.set('disabled', '');
            gridCovYourProj.setStore(datastore_cov);
            gridCovYourProj.store.fetch();
            gridCovOtherProj.setStore(datastore_cov);
            gridCovOtherProj.store.fetch({
                onComplete: function(items){
                    document.getElementById("covyourproj").style.visibility="visible";
                    document.getElementById("covotherproj").style.visibility="visible";
                    gridCovYourProj.filter({other_project: "n"});
                    if (gridCovYourProj.rowCount == 0) { document.getElementById("covyourproj").style.visibility="hidden"; }
                    gridCovOtherProj.filter({other_project: "y"});
                    if (gridCovOtherProj.rowCount == 0) { document.getElementById("covotherproj").style.visibility="hidden"; }
                }
            });
        }
    }
}


	</script>
	
	
	
	
	
  </head>
  
   <body class="tundra"style ="font-size: 10px;">
   
   	 <form id="formTrace" jsId="formTrace" action="#" execute="#">
        <input id="trace_type" name="type" value="trace" type="hidden"><input name="project_name" id = "trace_project_name" value="zzz" type="hidden">
    </form>
  
	
<div id="header_apple">
	<span class="title_page">Variations Detail</span>
	
	
	
	<span class="insetheader2"><img src="/icons/Polyicons/bipd4.png" width="50%" height="50%"></span>
	<span class="insetheader3">Bioinformatics Paris Descartes</span>
	<span class="title_credit">Universit√© Paris Descartes , Institut Imagine</span>
		<div id="header-content">
				<span class="insetheader_projectname"> <label class ="label1" id="stat_project">---</label>
					
					
				</span>
				<br>
				<span class="insetheader_description2">
					<span class="insetheader_description"><label class = "label1" id="stat_description">---</label></span>
				
				</span>
		</div>
</div>
	

		<div id="toolbar" dojoType="dijit.Toolbar" style="height:22px;">
			<span class="myspan">Name  <label class = "label2" id="stat_name">??</label></span>
			<span class="myspan">Description  <label class = "label2" id="stat_gene_description">??</label></span>
			<span class="myspan"><a>Position</a ><label class = "label2" id="stat_position">??</label></span> 
			<span class="myspan"><a>Variations</a> <label class = "label2" id="stat_variations">??</label></span>
			<span class="myspan"><a >Model <label class = "label2" id="stat_filter_model">??</label></a></span>
		
			<div id="lock_button"  jsId="lock_button" dojoType="dijit.form.Button" iconClass="loginIcon" onClick='relogin();' showLabel="true" style="float:right">
       							Login
    				</div>
    				
    			
	</div>

	

<div dojoType="dijit.layout.BorderContainer" style="width:100%; height:100%;">

  
	<!-- div pour affichage du message indiquant le chargement des donnes -->
   
 		

	<!--formulaire pour charger les fichiers ab1 des traces-->
   
	<div id="tabs" jsId="tabs" dojoType="dijit.layout.TabContainer"  style="width:100%;" region = "leading" tabStrip="true">
	
	
	<div dojoType="dijit.layout.ContentPane" selected="true" title="Table View" id= "tableViewer" jsId="tableViewer" style="width:100%;height:50%" selected="true">	
	<!-- div au dessus du tableau permettant de revenir en arrire et affichant le nom du projet -->	
   
	<!---------- END header---------->
	
        	<!-- table pour l'affichage des filtres  appliquer sur le tableau -->
       
			<!-- table pour l'affichage du tableau et des boutons sous le tableau -->
			<div dojoType="dijit.layout.BorderContainer" style="width:100%; height:500px;" design="sidebar" gutters="true" liveSplitters="true">
				<div id ="local_var" data-dojo-type="dijit.layout.ContentPane" data-dojo-props="splitter:true, region:'center'" >
						  <table id="filterTable"></table>
						  
					<!--	<div class="gridContainer" style="width:100px;"> -->
                    	<!-- tableau des donnees proprement dit -->
                    	<div id="gridVar" style="width:100%;height:100%" class="grid" dojoType="dojox.grid.DataGrid" selectable="1" jsId="gridVar"  autowidth="true" autoHeight="true">
                        </div>
					   <!--</div> -->
					</div>
                   
                    <!--	<div id ="csmall" dojoType="dijit.layout.ContentPane" region="trailing"  > -->
                    	<div id ="csmall" data-dojo-type="dijit.layout.ContentPane" data-dojo-props="splitter:true, region:'right'"style="width:400px;">
                    	<div  class="partsContainerSmall" jsId="csmall">
                    		 <div  dojoType="dijit.Toolbar">
                    		 	IGV Viewer 
							<div dojoType="dijit.form.Button" iconClass="igvIcon" onClick='LoadIGV();' showLabel="true">
       							Load 
    						</div>
							<div dojoType="dijit.form.Button" jsId ="view_igv" iconClass="igvView" onClick='viewIGV();' showLabel="true">
       							View
    						</div>
							<div dojoType="dijit.form.Button" jsId ="view_alamut" iconClass="alamutView" onClick='viewAlamut();' showLabel="true">
       							Alamut
    						</div>
                    		 </div> <!-- end div toolbar -->	
							<div class="gridContainerSmall"  style="height:270px;">
                                <div id="tabs_cov" jsId="tabs" dojoType="dijit.layout.TabContainer"  style="width:100%;height:100%" region = "leading" tabStrip="true">
                                    <div dojoType="dijit.layout.ContentPane" selected="true" title="This Project" id= "covthisproj" jsId="covthisproj" style="width:100%;height:100%" selected="true">    
                   	 			        <div id="gridAnnex" class="grid" dojoType="dojox.grid.DataGrid"  jsId="gridAnnex"></div>
               	 			        </div>
                                    <div dojoType="dijit.layout.ContentPane" title="Your Project(s)" id= "covyourproj" jsId="covyourproj" style="width:100%;height:100%">
                                        <table dojoType="dojox/grid/DataGrid"
                                            id    = "gridCovYourProj"
                                            jsId  = "gridCovYourProj"
                                            clientSort = true
                                            selectable = true
                                            selectionMode = "extended"
                                            onRowClick = "selectPatient_yours"
                                            query = "{ id: '*' }" >
                                            <thead><center>
                                                <tr>
                                                    <th width="30%" field="project"><b><center>Proj</b></center></th>
                                                    <th width="30%" field="name"><b><center>Patient</b></center></th>
                                                    <!--<th width="10%" field="ped" formatter="formatChild2"><b><center>ped</b></center></th>-->
                                                    <th width="8%" field="var_allele"><b><center>base</b></center></th>
                                                    <th width="7%" field="hohe"><b><center>st</b></center></th>
                                                    <th width="7%" field="nb_all_ref"><b><center>ref</b></center></th>
                                                    <th width="7%" field="nb_all_mut"><b><center>alt</b></center></th>
                                                    <!--<th width="10%" field="method"><b><center>met</b></center></th>
                                                    <th width="10%" field="valid"><b><center>valid</b></center></th>-->
                                                </tr>
                                            </thead></center>
                                        </table>
                                    </div>
                                    <div dojoType="dijit.layout.ContentPane" title="Other Project(s)" id= "covotherproj" jsId="covotherproj" style="width:100%;height:100%">
                                        <table dojoType="dojox/grid/DataGrid"
                                            id    = "gridCovOtherProj"
                                            jsId  = "gridCovOtherProj"
                                            clientSort = true
                                            selectable = true
                                            selectionMode = "extended"
                                            onRowClick = "selectPatient_others"
                                            query = "{ id: '*' }" >
                                            <thead><center>
                                                <tr>
                                                    <th width="25%" field="id"><b><center>Proj/Pat id</b></center></th>
                                                    <!--<th width="10%" field="ped" formatter="formatChild2"><b><center>ped</b></center></th>-->
                                                    <th width="8%" field="var_allele"><b><center>base</b></center></th>
                                                    <th width="7%" field="hohe"><b><center>st</b></center></th>
                                                    <th width="7%" field="nb_all_ref"><b><center>ref</b></center></th>
                                                    <th width="7%" field="nb_all_mut"><b><center>alt</b></center></th>
                                                    <!--<th width="10%" field="method"><b><center>met</b></center></th>
                                                    <th width="10%" field="valid"><b><center>valid</b></center></th>-->
                                                </tr>
                                            </thead></center>
                                        </table>
                                    </div>
           	 			        </div>
                   			</div>
							
							<div dojoType="dijit.Toolbar">
							<button id="A_1470" dojoType="dijit.form.Button" onClick='updateValidation(2,dojo.cookie("username"),gridAnnex,gridVar);' iconClass="validIcon">
            				    Ho
           					 </button>
							<button id="A_1471" dojoType="dijit.form.Button" onClick='updateValidation(3,dojo.cookie("username"),gridAnnex,gridVar);' iconClass="validIcon">
       				         He
      				      </button>
						
     				       <button id="A_1468" dojoType="dijit.form.Button" onClick='updateValidation(-1,dojo.cookie("username"),gridAnnex,gridVar);' iconClass="unvalidIcon">
     				           None
     				       </button>
     				       <button id="A_1469" dojoType="dijit.form.Button" onClick='updateValidation(-3,user_name,gridAnnex,gridVar);' iconClass="uncertainIcon">
      				          Todo
      				      </button>
						  
						</div>	
     				       																	
						

						</div>
						
						<div id ="csmall2" class="partsContainerSmall2" >
							
							<table id="tableElectro"  jsId="tableElectro" border="1"></table>
						</div>
                        </div>  
                    	<!-- div pour les boutons sous le tableau -->
                    <div id ="pbuttons"  dojoType="dijit.layout.ContentPane" region="top" style="width:100%; height:25px;">
                        <div dojoType="dijit.Toolbar"style="width:100%; height:25px;">
                            <!-- bouton pour rafraichir le tableau -->
                            <button dojoType="dijit.form.Button" onClick='forceRefreshTableVariation(gridVar);' iconClass="refreshIcon">
                                Refresh
                            </button>
                            <span dojoType="dijit.ToolbarSeparator"></span>
                                <!-- bouton pour exporter le tableau -->
                            <button id="1470" dojoType="dijit.form.Button" onClick='window.location=varurl+"&xls=1"' iconClass="exportIcon">
                                Export
                            </button>
                            <span dojoType="dijit.ToolbarSeparator"></span>
                            <button id="747" dojoType="dijit.form.Button" onClick='polyphen' iconClass="polyphenIcon">
                                Polyphen
                            </button>
                            <button dojoType="dijit.form.Button" onClick='sift' iconClass="polyphenIcon">
                                Sift
                            </button>
                            <button id="bHeComp" dojoType="dijit.form.Button" onClick='show_HeComp()' iconClass="hecompIconnb" disabled="true">Dejavu compound</button>
                            <span dojoType="dijit.ToolbarSeparator"></span>
                            
                            <span  class="titre"> Transcripts : </span> 
                            <input dojoType="dijit.form.FilteringSelect"  
                                searchAttr="label"
                                name="name"
                                autocomplete="true"
                                jsId="filterTranscript"
                                labelAttr= "label"
                                id="name"
                                onChange = "addNomenclature();"
                                style="margin-right:5px;" >
                            </input>
                            
                           
                            
                        </div>
                  	</div>
           
       <!-- </div>
		</div> -->
		
    </div>
	
	<!--affichage des consequences -->

		
	
		 <div class="pconseq" id="pconseq" dojoType="dijit.layout.ContentPane"   region="bottom">			  
		 <span  class="titre">Variation Name : <span id="variation_select"></span></span>
		<span  class="titre"> Consequence : <span id="consequence_select"></span></span> 
		<div id ="gridconseq" class="gridconseq">
		<!-- affichage des consquences sur une ligne -->
	
	
		
		<div id="gridConsequence"   dojoType="dojox.grid.DataGrid"  jsId="gridConsequence" autoHeight="5"  autowidth="true" ></div>
		
		</div>
		</div>
		
	
		
	
		
	</div><!--end bottom-->
<!--</div>	end border-->

 

<!-- div pour la vue graphique des variations -->
<div dojoType="dijit.layout.ContentPane"   id="toto" title="Graphic View" jsId="toto" onShow="test_init_viewer()" >
<div dojotype="dijit.layout.LayoutContainer" style="width: 1000px; height:1500px; padding: 0; margin: 0; border: 0;">
    <div dojotype="dijit.layout.ContentPane" layoutalign= "top" style="width: 1000px;height:105px">
        <div dojotype="dijit.layout.LayoutContainer" style="width: 1000px; height:75px; padding: 0; margin: 0; border: 0;">
            <div dojotype="dijit.layout.ContentPane" layoutalign="client" style="width: 40px;height:73px">
               	<center>
               			
                    <table class="tableViewer" bgcolor="beige" style="border : 1px solid black;font-size: small;">
                        <tr>
                            
							 <th colspan=12 style="border-bottom:1px double black;">
                                 Patients : <span id="sel_patient2">XXX</span>
								 coverage : <select style="font-size: small" jsId="select_coverage" data-dojo-type="dijit.form.Select" onChange="change_coverage()">
    						<option value="cov0">0</option>
    						<option value="cov5" selected="selected">5</option>
    						<option value="cov10">10</option>
   							 <option value="cov15">15</option>
   						 	<option value="cov20">20</option>
							</select>
						
                            </th>
                        </tr>
                        <tr>
                        	 
                            <td  class = "t1" rowspan=2>
                            	
                                <div dojotype= "dijit.form.DropDownButton">
                                    <span style="font-size: small"><img alt="" width="32" height= "32" style="vertical-align:middle;padding:5px;"/><span style="padding:5px;">Filter option</span></span>
                                    <div dojotype= "dijit.TooltipDialog" id= "tooltipDlg" title="">
                                        <center>
                                            <table style="border : 1px solid black;font-size: small">
                                                <tr>
                                                    <th colspan="4" style="border : 1px solid black">
                                                        <img alt="" width="32" height="32" src= "/images/polyicons/Tools-32.png" style="vertical-align:middle"/>Filter
                                                    </th>
                                                </tr>
                                                <tr style="border : 1px solid black">
                                                    <td class ="t1">
                                                        By
                                                        quality
                                                    </td>
                                                    <td>
                                                        <input type= "checkbox" dojotype= "dijit.form.CheckBox" id= "cbweak" value="1" checked= "checked" onclick="showWeak = (!showWeak);redrawAllVariations();"/>
                                                        <label for= "cbweak">
                                                            <img alt="" width="12" height="12" src= "/icons/Polyicons/services.png" /><span>Weak</span>
                                                        </label>
                                                    </td>
                                                    <td>
                                                        <input type= "checkbox" dojotype= "dijit.form.CheckBox" id= "cbmedium" value="1" checked= "checked" onclick="showMedium = (!showMedium);redrawAllVariations();"/>
                                                        <label for= "cbmedium">
                                                            <img alt="" width="12" height="12" src= "/icons/Polyicons//services.png" /><img alt="" width="12" height="12" src= "/icons/Polyicons/services.png" /><span>Medium</span>
                                                        </label>
                                                    </td>
                                                    <td>
                                                        <input type= "checkbox" dojotype= "dijit.form.CheckBox" id= "cbstrong" value="1" checked= "checked" onclick="showStrong = (!showStrong);redrawAllVariations();"/>
                                                        <label for= "cbstrong">
                                                            <img alt="" width="12" height="12" src= "/icons/Polyicons/services.png" /><img alt="" width="12" height="12" src= "/icons/Polyicons/services.png" /><img alt="" width="12" height="12" src= "/icons/Polyicons/services.png" /><span>Strong</span>
                                                        </label>
                                                    </td>
                                                </tr>
                                                <tr style="border : 1px solid black;">
                                                    <td class="t1">
                                                        By
                                                        type
                                                    </td>
                                                    <td>
                                                        <input type= "checkbox" dojotype= "dijit.form.CheckBox" id= "cbcoding" value="1" checked= "checked" onclick="clickCoding()"/>
                                                        <label for= "cbcoding">
                                                           <span class="codingIcon">Coding</span>
                                                        </label>
                                                    </td>
                                                    <td>
                                                        <input type= "checkbox" dojotype= "dijit.form.CheckBox" jsid= "cbutr" id= "cbutr" value="1" checked= "checked" onclick="clickUTR()"/>
                                                        <label for= "cbutr">
                                                            <span class="utrIcon">UTR</span>
                                                        </label>
                                                    </td>
                                                    <td>
                                                        <input type= "checkbox" dojotype= "dijit.form.CheckBox" id= "cbintronic" value="1" checked= "checked" onclick="clickIntronic()"/>
                                                        <label for= "cbintronic">
                                                           <span class="intronicIcon">Intronic</span>
                                                        </label>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td class="t1">
                                                        Known
                                                        Snp
                                                    </td>
                                                    <td colspan= "3">
                                                        <center>
                                                            <input type= "checkbox" dojotype= "dijit.form.CheckBox" id= "cbdbsnp" value= "1" checked= "checked" onclick="clickEnsembl()"/>
                                                            <label for= "cbdbsnp">
                                                                 <img alt="" width="15" height= "15" src= "polyweb/images/polyicons/identity.png" align="absmiddle" /><span>dbSNP</span>
                                                            </label>
                                                        </center>
                                                    </td>
                                                </tr>
                                            </table>
                                        </center>
                                    </div>
                                </div>
                            </td>
							
                        <td class ="t1" rowspan=2>
                       
                                <div dojotype= "dijit.form.HorizontalSlider" name="horizontal1" onchange="testSlider(arguments[0]);" value="1" maximum="7" minimum="1" pageincrement="1" discretevalues="7" showbuttons="false" intermediatechanges= "false" style="width:250px; height: 20px;" id="slider1">
								<div dojoType="dijit.form.HorizontalRule" container="bottomDecoration" count=7 style="height:4px;"> </div>
                                    <ol dojotype= "dijit.form.HorizontalRuleLabels" container= "bottomDecoration" count=7 style="height:1em;font-size:50%;color:gray;">
                                        <li>
                                            <img alt="" width="8" height="8" src= "polyweb/images/polyicons/xmag.png" style="padding:1px 0px 1px 00px;"/>
                                            <br/>
                                        </li>
                                        <li>
                                            <img alt="" width="12" height="12" src= "polyweb/images/polyicons/xmag.png" style="padding:2px 0px 1px 00px;"/>
                                            <br/>
                                        </li>
                                        <li>
                                            <img alt="" width="20" height="20" src= "../images/polyicons/xmag.png" style="padding:2px 0px 2px 00px;"/>
                                            <br/>
                                        </li>
                                    </ol>
                                </div>
                        
                        </td>
                                <th >
                                    <img alt="" width="12" height= "12" src= "../images/polyicons/services.png" />
                                </th>
                                <th >
                                    <img alt="" width="12" height= "12" src= "../images/polyiconsservices.png" /><img alt="" width="12" height="12" src= "/icons/Polyicons/services.png" />
                                </th>
                                <th >
                                    <img alt="" width="12" height= "12" src= "//icons/Polyicons/services.png" /><img alt="" width="12" height="12" src= "/icons/Polyicons/services.png" /><img alt="" width="12" height="12" src= "/icons/Polyicons/services.png" />
                                </th>
                                <th >
                                    <span class="intronicIcon">Intronic</span>
                                </th>
                                <th >
                                   <span class="utrIcon">UTR</span>
                                </th>
                                <th >
                                   <span class="codingIcon">Coding</span>
                                </th>
                                <th >
                                    <span class="dbsnpIcon">dbSNP</span>
                                </th>
                                <th>
                                    <span class="validateIcon">Validated</span>
                                </th>
                            </tr>
                            <tr>                         
                                <td class="t1">
                                    <span id="nbweak">X</span>
                                </td>
                                <td class="t1">
                                    <span id="nbmedium">X</span>
                                </td>
                                <td class="t1">
                                    <span id="nbstrong">X</span>
                                </td>
                                <td  class="t1">
                                    <span id="nbintronic">X</span>
                                </td>
                                <td  class="t1">
                                    <span id="nbutr">X</span>
                                </td>
                                <td  class="t1">
                                    <span id="nbcoding">X</span>
                                </td>
                                <td  class="t1">
                                    <span id="nbdbsnp">X</span>
                                </td>
                                <td  class="t1">
                                    <span id="nbvalidate">X</span>
                                </td>
                            </tr>
                        </table>
						</center>
                    </div>
                </div>
            </div>
            <div dojotype="dijit.layout.ContentPane" layoutalign="client" style="background:beige;width:900px;height:2000px;">
                
				<div dojoType="dijit.layout.BorderContainer" design="sidebar" gutters="true" liveSplitters="true" id="borderContainer">
                    <div id="right" dojoType="dijit.layout.ContentPane" splitter="true" region="center">
                        <div dojoType="dijit.layout.BorderContainer" style="height:100%,width:100%;overflow-y:auto;white-space:nowrap;border:2px solid #00000;">
                            <div id='map' style="height:40px;overflow-x:hidden;overflow-y:auto;border:1px solid #7EABCD;resize:vertical;"></div>
                            <br>
                            <div id='drawing_transcripts' style="height:200px;overflow-x:hidden;overflow-y:auto;border:1px solid #7EABCD;resize:vertical;"></div>
                            <br>
                            <div id='drawing_patients' style="height:200px;overflow-x:auto;overflow-y:auto;border:1px solid #7EABCD;resize:vertical;"></div>
                            <br><br>
                        </div>
                    </div>
                    <div dojoType="dijit.layout.ContentPane" splitter="false" region="bottom"> <span id="over" class="infoSpan"></span> </div>
                </div>
            </div>
        </div>
    </div>
<div  jsId="table_coverage" dojoType="dijit.layout.ContentPane" title="Coverage View" style="width:100%;height:1000px" onShow="show_coverage()">	


</div>

<div dojoType="dijit.layout.ContentPane"  href="polydejavu/polyweb_polydejavu.html" title="Deja View" style="width:100%;height:1000px" onLoad="show_dejavu()">	
	<a  jsId="table_dejavu" href="polydejavu/polyweb_polydejavu.html" data-dojo-type="dijit/layout/LinkPane">Tab 1</a> 
</div>

</div> <!--end border tab container global-->



</div> <!--border total-->

	<!-- formulaire pour changer le statut des variations (cf changeStatus.js) -->
    <form id="statusForm" style="border: 1px solid ;" enctype="multipart/form-data" action="#" method="post">
        <input id="id" name="id" value="" type="hidden"><input id="mother_id" name="mother_id" value="" type="hidden"><input id="objet" name="objet" value="" type="hidden"><input id="type" name="type" value="" type="hidden">
    </form>
	
	
	<!-- div login -->
	

	 <div id="login" dojoType="dijit.Dialog" title="Login">
   	  <div dojoType="dijit.TooltipDialog" id="dialog1" title="Login Form" execute="setPassword(arguments[0]);">
   	 <form method="post" class="signin" action="#">
                <fieldset class="textbox">
            	<label class="username">
                <span>Username</span>
                <input id="username" name="username" value="" type="text" autocomplete="on" placeholder="Username">
                </label>
                <label class="password">
                <span>Password</span>
                <input id="passwd" name="password" value="" type="password" placeholder="Password">
                </label>
                </fieldset>
          </form>
 					<center>
                    <div   type="submit" dojoType="dijit.form.Button" iconClass="loginIcon"  showLabel="true">
       						<div style='width:150px'>Sign in</div>


    				</div>
    		</center>
                  
                       
            </div>
        </div>

    <!-- ############################################################################################## -->
    <!--            POPUPs             -->
    <!-- ############################################################################################## -->
    <div id="popupHeComp" jsId="popupHeComp" dojoType="dojox.widget.Dialog" sizeToViewport="true"  viewportPadding="75">
        <center>
            <br><br><br><br>
            <div>
                <span style="margin-left:3px;margin-right:3px;"><u><b><FONT COLOR=red>Heterozygote Composite</FONT></b></u></span>
                <br><br>
                <div id="div_tabHeComp">
                    <table dojoType="dojox/grid/DataGrid" style="border: 1px solid black;height:80px;width:60%;"
                        id = "gridHeCompLocal"
                        jsId = "gridHeCompLocal"
                        query = "{ id: '*' }" >
                        <thead><center>
                            <tr>
                                <th width="40px" field="implicated" formatter="formatShowYourVariations"><b><center>Access</b></center></th>
                                <th width="20%" field="var_1"><b><center>Variation 1</b></center></th>
                                <th width="20%" field="consequence_1" formatter="formatConsequence"><b><center>Consequence 1</b></center></th>
                                <th width="20%" field="var_2"><b><center>Variation 2</b></center></th>
                                <th width="20%" field="consequence_2" formatter="formatConsequence"><b><center>Consequence 2</b></center></th>
                                <th width="10%" field="nbProj" formatter="formatCellDejaVU"><b><center>Nb Project(s)</b></center></th>
                                <th width="10%" field="nbPat" formatter="formatCellPat"><b><center>Nb Patient(s)</b></center></th>
                            </tr>
                        </thead></center>
                    </table>
                </div>
            </div>
            <br><br>
            <div>
                <span style="margin-left:3px;margin-right:3px;"><u><b><FONT COLOR=red>Project(s) / Patient(s) list</FONT></b></u></span>
                <span style="margin-left: 5px" id="details_projNok_local"> ---> <b><u>[ Not Authorized Project: </b></u>0</span>
                <span data-dojo-type="dijit.ToolbarSeparator"></span>
                <span style="margin-left: 5px;margin-right: 5px" id="details_projOk_local"><b><u>Authorized Project: </b></u>0 ]</span>
                <br><br>
                <div>
                    <table dojoType="dojox/grid/DataGrid" style="border: 1px solid black;height:350px;width:60%;overflow-y:scroll"
                        id    = "gridLogLocal"
                        jsId  = "gridLogLocal"
                        selectable = "true"
                        selectionMode = "extended"
                        query = "{ projName: 'None' }" >
                        <thead><center>
                            <tr>
                                <th width="15%" field="projName"><b><center>Project name</b></center></th>
                                <th width="20%" field="description"><b><center>Description</b></center></th>
                                <th width="30%" field="owner" formatter="formatEmail"><b><center>Owner(s)</b></center></th>
                                <th width="35%" field="pat" formatter="formatCellPatDetails"><b><center>Patient(s) with this variation</b></center></th>
                            </tr>
                        </thead></center>
                    </table>
                </div>
            </div>
        </center>
    </div>
    
    <div id="popupHeComp_noResult" jsId="popupHeComp_noResult" dojoType="dojox.widget.Dialog" sizeToViewport="true"  viewportPadding="200">
        <center>
            <br><br><br><br>
            <div>
                <span style="margin-left:3px;margin-right:3px;"><u><b>Heterozygote Composite<br><br><br></u><FONT COLOR=red>NO RESULT !</FONT></b></span>
            </div>
        </center>
    </div>
    
    <div dojoType="dijit.Dialog" jsId="waiting" id="waiting" style="height:80px" >
        Loading Data <img id="wait1" src="images/polyicons/wait18trans.gif" align="absmiddle">
    </div>
      	

<div id="graph_exon" dojoType="dojox.widget.Dialog" sizeToViewport="true" 	viewportPadding="50" title="heho" > 
		<center>
		<div id="waiting_chart">
			
		</div>
		</center>
   	   <div id="chart_exon" style="width: 1200px; height: 550px; margin: 10px auto 0px auto;">
   	   
  		</div>	
<div id ="legend"></div>
<div id ="title" style="width: 1000px; height: 50px;">TOTO</div>
</div>

<div id="popup_coverage" dojoType="dojox.widget.Dialog"   sizeToViewport="true" viewportPadding="50" > 
     <select jsId="padding_spinner" id="padding_spinner" data-dojo-type="dijit/form/Select">
  
    
      <option value="0" elected="selected">0</option>
      <option value="5" >5</option>
    <option value="10">10</option>
    <option value="15">15</option>
    <option value="20" s>20</option>
    <option value="30">30</option>
</select>
        <div  id="div_popup_coverage" jsId="div_popup_coverage" data-dojo-type="dijit/layout/ContentPane" style="border: 1px solid black;height:100%;width:100%">  
            
        </div>  
        
</div>						
    </body>
    </html>
